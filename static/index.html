<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KubeNav - K8s Podè´Ÿè½½ç®¡ç†å·¥å…·</title>
    <style>
        /* å…¨å±€æ ·å¼é‡ç½®å’ŒåŸºç¡€è®¾ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fa;
            color: #333;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* é¡¶éƒ¨å¯¼èˆªæ æ ·å¼ */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }
        
        .header-left {
            display: flex;
            align-items: center;
        }
        
        .header-logo {
            font-size: 24px;
            font-weight: 700;
            margin-right: 20px;
        }
        
        .header-version {
            font-size: 14px;
            opacity: 0.8;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 4px 12px;
            border-radius: 20px;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .user-info {
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 14px;
        }
        
        .btn:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }
        
        .btn-danger {
            background-color: #ef4444;
        }
        
        .btn-danger:hover {
            background-color: #dc2626;
        }
        
        /* ä¸»ä½“å†…å®¹åŒºåŸŸ */
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        /* å·¦ä¾§å¯¼èˆªæ  */
        .sidebar {
            width: 260px;
            background-color: white;
            border-right: 1px solid #e2e8f0;
            padding: 24px 0;
            overflow-y: auto;
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.05);
        }
        
        .nav-section {
            margin-bottom: 32px;
        }
        
        .nav-title {
            font-size: 12px;
            font-weight: 600;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 0 24px 12px;
        }
        
        .nav-menu {
            list-style: none;
        }
        
        .nav-item {
            margin-bottom: 4px;
        }
        
        .nav-link {
            display: block;
            padding: 12px 24px;
            color: #334155;
            text-decoration: none;
            font-size: 15px;
            font-weight: 500;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            cursor: pointer;
        }
        
        .nav-link:hover {
            background-color: #f1f5f9;
            color: #667eea;
        }
        
        .nav-link.active {
            background-color: #f0f4ff;
            color: #667eea;
            border-left-color: #667eea;
        }
        
        /* å¯¼èˆªä¸‹æ‹‰èœå•æ ·å¼ */
        .nav-dropdown-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-dropdown-icon {
            font-size: 12px;
            transition: transform 0.3s ease;
        }
        
        .nav-dropdown-menu {
            list-style: none;
            margin: 0;
            padding: 0;
            display: none;
        }
        
        .nav-dropdown-menu.active {
            display: block;
        }
        
        .nav-dropdown-menu .nav-link {
            padding-left: 40px;
            font-size: 14px;
            background-color: #f8fafc;
        }
        
        .nav-dropdown-menu .nav-link.active {
            background-color: #e2e8f0;
        }
        
        .nav-dropdown-toggle.active .nav-dropdown-icon {
            transform: rotate(180deg);
        }
        
        /* å³ä¾§å†…å®¹åŒºåŸŸ */
        .content {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            background-color: #f5f7fa;
        }
        
        /* å†…å®¹æ ‡é¢˜ */
        .content-header {
            margin-bottom: 32px;
        }
        
        .content-title {
            font-size: 24px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 8px;
        }
        
        .content-subtitle {
            font-size: 14px;
            color: #64748b;
        }
        
        /* é›†ç¾¤å¡ç‰‡æ ·å¼ */
        .cluster-section {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .cluster-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 24px;
            transition: all 0.3s ease;
        }
        
        .cluster-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
        }
        
        .cluster-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .cluster-name {
            font-size: 18px;
            font-weight: 700;
            color: #1e293b;
        }
        
        .cluster-status {
            font-size: 12px;
            font-weight: 600;
            padding: 4px 12px;
            border-radius: 20px;
        }
        
        .cluster-status.active {
            background-color: #d1fae5;
            color: #059669;
        }
        
        .cluster-info {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .info-label {
            font-size: 14px;
            color: #64748b;
            font-weight: 500;
        }
        
        .info-value {
            font-size: 14px;
            color: #1e293b;
            font-weight: 600;
        }
        
        /* ç©ºçŠ¶æ€æ ·å¼ */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #64748b;
        }
        
        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }
        
        .empty-state-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .empty-state-description {
            font-size: 14px;
        }
        
        /* åŠ è½½çŠ¶æ€æ ·å¼ */
        .loading-state {
            text-align: center;
            padding: 60px 20px;
            color: #64748b;
        }
        
        .loading-spinner {
            border: 4px solid rgba(102, 126, 234, 0.3);
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* æ“ä½œæŒ‰é’®ç»„ */
        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 16px;
            justify-content: flex-end;
        }
        
        .btn-primary {
            background-color: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background-color: #5568d3;
            transform: translateY(-1px);
        }
        
        .btn-secondary {
            background-color: #f1f5f9;
            color: #64748b;
            border: 1px solid #e2e8f0;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            background-color: #e2e8f0;
        }
        
        /* è´Ÿè½½ç®¡ç†æ ·å¼ */
        /* å®¹å™¨æ ·å¼ */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
        }
        
        /* æ ‡é¢˜æ ·å¼ */
        h1 {
            color: #2c3e50;
            text-align: left;
            margin-bottom: 30px;
            font-size: 2.2rem;
            font-weight: 600;
        }
        
        h2 {
            color: #34495e;
            margin-bottom: 20px;
            font-size: 1.6rem;
            font-weight: 500;
            border-bottom: 2px solid #e0e6ed;
            padding-bottom: 10px;
        }
        
        /* é€‰æ‹©åŒºåŸŸæ ·å¼ */
        .select-section {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
            align-items: end;
        }
        
        .select-item {
            flex: 1;
            min-width: 200px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2d3748;
            font-size: 0.95rem;
        }
        
        select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            background-color: #fff;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        /* è¡¨æ ¼æ ·å¼ */
        .pod-section {
            margin-top: 30px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        th {
            background-color: #ffc0cb;
            color: #8b4513;
            padding: 16px;
            text-align: center;
            font-weight: 600;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        td {
            padding: 16px;
            text-align: center;
            border-bottom: 1px solid #f1f5f9;
            font-size: 0.95rem;
        }
        
        /* é™åˆ¶Podåç§°å®½åº¦å¹¶å…è®¸æ¢è¡Œ */
        td:nth-child(1) {
            max-width: 200px;
            word-wrap: break-word;
            word-break: break-all;
        }
        
        /* ç¡®ä¿æ“ä½œæŒ‰é’®åˆ—ä¸è¢«å‹ç¼© */
        .action-buttons {
            min-width: 150px;
        }
        
        tr:nth-child(even) {
            background-color: #f8fafc;
        }
        
        tr:hover {
            background-color: #f1f5f9;
            transition: background-color 0.2s ease;
        }
        
        /* çŠ¶æ€æ ‡ç­¾æ ·å¼ */
        .status {
            padding: 5px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .status.Running {
            background-color: #e8f5e8;
            color: #2e7d32;
        }
        
        .status.Pending {
            background-color: #fff3e0;
            color: #ef6c00;
        }
        
        .status.Failed {
            background-color: #ffebee;
            color: #c62828;
        }
        
        .status.Succeeded {
            background-color: #e3f2fd;
            color: #1565c0;
        }
        
        /* æ“ä½œæŒ‰é’®æ ·å¼ */
        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            align-items: center;
        }
        
        button {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        button.remove {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }
        
        button.remove:hover {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
        }
        
        button.restore {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }
        
        button.restore:hover {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
        }
        
        /* è¸¢å‡ºè´Ÿè½½çŠ¶æ€æ ·å¼ */
        .has-removeload {
            color: #dc2626;
            font-weight: 600;
            font-size: 0.95rem;
        }
        
        .no-removeload {
            color: #059669;
            font-weight: 600;
            font-size: 0.95rem;
        }
        
        /* æ¶ˆæ¯æç¤ºæ ·å¼ */
        .message {
            padding: 16px 20px;
            margin: 10px 0;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.95rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .message.success {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            color: #065f46;
            border: 2px solid #059669;
        }
        
        .message.error {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            color: #991b1b;
            border: 2px solid #dc2626;
        }
        
        /* ç©ºçŠ¶æ€å’ŒåŠ è½½çŠ¶æ€ */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #64748b;
        }
        
        .empty-state p {
            font-size: 1.1rem;
            margin-bottom: 10px;
        }
        
        .empty-state small {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        /* ç”¨æˆ·ç®¡ç†æ ·å¼ */
        /* è¡¨æ ¼æ ·å¼ */
        .user-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .user-table th {
            background-color: #667eea;
            color: white;
            padding: 16px;
            text-align: left;
            font-weight: 600;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .user-table td {
            padding: 16px;
            text-align: left;
            border-bottom: 1px solid #f1f5f9;
            font-size: 0.95rem;
        }
        
        /* ç®¡ç†æŒ‰é’®æ ·å¼ */
        .manage-buttons {
            display: flex;
            gap: 10px;
        }
        
        .btn-edit {
            background-color: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-edit:hover {
            background-color: #5568d3;
            transform: translateY(-1px);
        }
        
        .btn-delete {
            background-color: #ef4444;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-delete:hover {
            background-color: #dc2626;
            transform: translateY(-1px);
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
            }
            
            .main-content {
                flex-direction: column;
            }
            
            .cluster-section {
                grid-template-columns: 1fr;
            }
            
            .select-section {
                flex-direction: column;
            }
            
            .select-item {
                width: 100%;
            }
            
            table {
                font-size: 0.85rem;
            }
            
            th, td {
                padding: 12px 8px;
            }
            
            .action-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            button {
                width: 100%;
                padding: 8px 12px;
            }
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <header class="header">
        <div class="header-left">
            <div class="header-logo">KubeNav</div>
            <div class="header-version">v1.1</div>
        </div>
        <div class="header-right">
                <div class="user-info">
                    <span>ğŸ‘¤</span>
                    <span id="currentUsername">admin</span>
                </div>
                <button id="logoutBtn" class="btn btn-danger">ç™»å‡º</button>
            </div>
    </header>
    
    <!-- ä¸»ä½“å†…å®¹åŒºåŸŸ -->
    <div class="main-content">
        <!-- å·¦ä¾§å¯¼èˆªæ  -->
        <aside class="sidebar">
            <nav>
                <div class="nav-section">
                    <div class="nav-title">æ ¸å¿ƒåŠŸèƒ½</div>
                    <ul class="nav-menu">
                        <li class="nav-item">
                            <a href="#" class="nav-link active" id="clusterNav">Kubernetesé›†ç¾¤</a>
                        </li>
                        <li class="nav-item">
                            <div class="nav-link nav-dropdown-toggle" id="clusterMgmtNav">
                                é›†ç¾¤ç®¡ç† <span class="nav-dropdown-icon">â–¼</span>
                            </div>
                            <ul class="nav-dropdown-menu" id="clusterMgmtMenu">
                                <li class="nav-item">
                                    <a href="#" class="nav-link" id="nodeNav" onclick="switchModule('node')">èŠ‚ç‚¹ç®¡ç†</a>
                                </li>
                                <li class="nav-item">
                                    <a href="#" class="nav-link" id="namespaceNav" onclick="switchModule('namespace')">å‘½åç©ºé—´</a>
                                </li>
                                <li class="nav-item">
                                    <a href="#" class="nav-link" id="workloadNav" onclick="switchModule('workload')">å·¥ä½œè´Ÿè½½</a>
                                </li>
                                <li class="nav-item">
                                    <a href="#" class="nav-link" id="podNav" onclick="switchModule('pod')">Pod</a>
                                </li>
                                <li class="nav-item">
                                    <a href="#" class="nav-link" id="serviceNav" onclick="switchModule('service')">æœåŠ¡ä¸è·¯ç”±</a>
                                </li>
                                <li class="nav-item">
                                    <a href="#" class="nav-link" id="configNav" onclick="switchModule('config')">é…ç½®ç®¡ç†</a>
                                </li>
                                <li class="nav-item">
                                    <a href="#" class="nav-link" id="storageNav" onclick="switchModule('storage')">å­˜å‚¨</a>
                                </li>
                            </ul>
                        </li>

                        <li class="nav-item">
                            <a href="#" class="nav-link" id="userNav">ç”¨æˆ·ç®¡ç†</a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" id="logNav">æ—¥å¿—ç®¡ç†</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>
        
        <!-- å³ä¾§å†…å®¹åŒºåŸŸ -->
        <main class="content">
            <!-- é›†ç¾¤ç®¡ç†å†…å®¹ -->
            <div id="clusterContent" style="display: block;">
                <!-- å†…å®¹æ ‡é¢˜ -->
                <div class="content-header">
                    <h1 class="content-title">Kubernetesé›†ç¾¤</h1>
                    <p class="content-subtitle">ç®¡ç†å’Œç›‘æ§æ‰€æœ‰Kubernetesé›†ç¾¤</p>
                    <div style="margin-top: 16px;">
                        <button class="btn-primary" onclick="addCluster()">æ·»åŠ é›†ç¾¤</button>
                    </div>
                </div>
                
                <!-- é›†ç¾¤åˆ—è¡¨ -->
                <div class="cluster-section" id="clusterSection">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        <p>æ­£åœ¨åŠ è½½é›†ç¾¤åˆ—è¡¨...</p>
                    </div>
                </div>
            </div>
            

            
            <!-- ç”¨æˆ·ç®¡ç†å†…å®¹ -->
            <div id="userContent" style="display: none;">
                <!-- å†…å®¹æ ‡é¢˜ -->
                <div class="content-header">
                    <h1 class="content-title">ç”¨æˆ·ç®¡ç†</h1>
                    <p class="content-subtitle">ç®¡ç†ç³»ç»Ÿç”¨æˆ·å’Œæƒé™</p>
                    <div style="margin-top: 16px;">
                        <button class="btn-primary" onclick="openAddUserModal()">æ·»åŠ ç”¨æˆ·</button>
                    </div>
                </div>
                
                <!-- ç”¨æˆ·åˆ—è¡¨ -->
                <div class="container">
                    <div id="userMessage"></div>
                    <table class="user-table" id="userTable">
                        <thead>
                            <tr>
                                <th style="width: 150px;">ç”¨æˆ·å</th>
                                <th style="width: 120px;">ç®¡ç†å‘˜æƒé™</th>
                                <th style="width: 100px;">è¯»æƒé™</th>
                                <th style="width: 100px;">å†™æƒé™</th>
                                <th style="width: 120px;">æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="5" style="text-align: center; color: #999;">åŠ è½½ç”¨æˆ·åˆ—è¡¨...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- æ—¥å¿—ç®¡ç†å†…å®¹ -->
            <div id="logContent" style="display: none;">
                <!-- å†…å®¹æ ‡é¢˜ -->
                <div class="content-header">
                    <h1 class="content-title">æ—¥å¿—ç®¡ç†</h1>
                    <p class="content-subtitle">æŸ¥çœ‹å’Œç®¡ç†ç³»ç»Ÿæ“ä½œæ—¥å¿—</p>
                    <div style="margin-top: 16px; display: flex; flex-wrap: wrap; gap: 16px; align-items: flex-start;">
                        <div style="margin-top: 5px;">
                            <label for="logActionFilter" style="margin-right: 24px; font-weight: 600;">æ“ä½œç±»å‹:</label>
                            <select id="logActionFilter" onchange="loadLogs()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">æ‰€æœ‰æ“ä½œ</option>
                                <option value="login_success">ç™»å½•æˆåŠŸ</option>
                                <option value="login_failed">ç™»å½•å¤±è´¥</option>
                                <option value="logout">ç™»å‡º</option>
                                <option value="remove_load">è¸¢å‡ºè´Ÿè½½</option>
                                <option value="restore_traffic">æ¢å¤æµé‡</option>
                                <option value="add_user">æ·»åŠ ç”¨æˆ·</option>
                                <option value="update_user">æ›´æ–°ç”¨æˆ·</option>
                                <option value="delete_user">åˆ é™¤ç”¨æˆ·</option>
                                <option value="add_cluster">æ·»åŠ é›†ç¾¤</option>
                                <option value="update_cluster">æ›´æ–°é›†ç¾¤</option>
                                <option value="delete_cluster">åˆ é™¤é›†ç¾¤</option>
                            </select>
                        </div>
                        <div style="margin-top: 5px;">
                            <label for="logTimeRange" style="margin-right: 24px; font-weight: 600;">æ—¶é—´èŒƒå›´:</label>
                            <select id="logTimeRange" onchange="applyTimeRange()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">è‡ªå®šä¹‰æ—¶é—´</option>
                                <option value="5m">æœ€è¿‘5åˆ†é’Ÿ</option>
                                <option value="1h">æœ€è¿‘1å°æ—¶</option>
                                <option value="6h">æœ€è¿‘6å°æ—¶</option>
                                <option value="12h">æœ€è¿‘12å°æ—¶</option>
                                <option value="24h">æœ€è¿‘24å°æ—¶</option>
                                <option value="3d">æœ€è¿‘3å¤©</option>
                                <option value="7d">æœ€è¿‘7å¤©</option>
                                <option value="30d">æœ€è¿‘1ä¸ªæœˆ</option>
                            </select>
                        </div>
                        <div style="margin-top: 0px;">
                            <label for="logStartDate" style="margin-right: 8px; font-weight: 600;">å¼€å§‹æ—¶é—´:</label>
                            <input type="datetime-local" id="logStartDate" onchange="loadLogs()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                        </div>
                        <div style="margin-top: 0px;">
                            <label for="logEndDate" style="margin-right: 8px; font-weight: 600;">ç»“æŸæ—¶é—´:</label>
                            <input type="datetime-local" id="logEndDate" onchange="loadLogs()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                        </div>
                        <div style="flex: 1; max-width: 300px; margin-top: 30px;">
                            <input type="text" id="logSearch" placeholder="æœç´¢ç”¨æˆ·å..." onkeyup="handleLogSearch()" style="width: 100%; padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                        </div>
                        <button class="btn-primary" onclick="loadLogs()" style="margin-top: 28px;">åˆ·æ–°</button>
                    </div>
                </div>
                
                <!-- æ—¥å¿—åˆ—è¡¨ -->
                <div class="container">
                    <div id="logMessage"></div>
                    <table class="user-table" id="logsTable">
                        <thead>
                            <tr>
                                <th style="width: 180px;">æ—¶é—´</th>
                                <th style="width: 120px;">ç”¨æˆ·å</th>
                                <th style="width: 120px;">æ“ä½œç±»å‹</th>
                                <th style="width: 150px;">æ“ä½œèµ„æº</th>
                                <th style="width: 250px;">è¯¦ç»†ä¿¡æ¯</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="5" style="text-align: center; color: #999;">åŠ è½½æ—¥å¿—åˆ—è¡¨...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- èŠ‚ç‚¹ç®¡ç†å†…å®¹ -->
            <div id="nodeContent" style="display: none;">
                <div class="content-header">
                    <h1 class="content-title">èŠ‚ç‚¹ç®¡ç†</h1>
                    <p class="content-subtitle">ç®¡ç†Kubernetesé›†ç¾¤èŠ‚ç‚¹</p>
                    <div style="margin-top: 16px; display: flex; gap: 16px; align-items: flex-start; flex-wrap: wrap;">
                        <div style="margin-top: 5px;">
                            <label for="nodeCluster" style="margin-right: 24px; font-weight: 600;">K8sé›†ç¾¤:</label>
                            <select id="nodeCluster" onchange="loadNodes()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">è¯·é€‰æ‹©é›†ç¾¤</option>
                            </select>
                        </div>
                        <div style="margin-top: 28px; display: flex; gap: 10px; align-items: center;">
                            <input type="text" id="nodeSearch" placeholder="æœç´¢èŠ‚ç‚¹åç§°æˆ–IP..." onkeypress="if(event.key === 'Enter') searchNodes()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px; width: 300px;">
                            <button class="btn-primary" onclick="searchNodes()">æœç´¢</button>
                            <button class="btn-secondary" onclick="clearNodeSearch()">æ¸…ç©º</button>
                        </div>
                        <button class="btn-primary" onclick="loadNodes()" style="margin-top: 30px;">åˆ·æ–°</button>
                    </div>
                </div>
                <div class="container">
                    <div id="nodeMessage"></div>
                    <table class="user-table" id="nodesTable">
                        <thead>
                            <tr>
                                <th style="width: 200px; text-align: center;">èŠ‚ç‚¹åç§°</th>
                                <th style="width: 120px; text-align: center;">çŠ¶æ€</th>
                                <th style="width: 150px; text-align: center;">IPåœ°å€</th>
                                <th style="width: 160px; text-align: center;">æ“ä½œç³»ç»Ÿ</th>
                                <th style="width: 100px; text-align: center;">CPU</th>
                                <th style="width: 100px; text-align: center;">å†…å­˜</th>
                                <th style="width: 180px; text-align: center;">åˆ›å»ºæ—¶é—´</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="7" style="text-align: center; color: #999;">è¯·é€‰æ‹©é›†ç¾¤æŸ¥çœ‹èŠ‚ç‚¹åˆ—è¡¨</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- å‘½åç©ºé—´ç®¡ç†å†…å®¹ -->
            <div id="namespaceContent" style="display: none;">
                <div class="content-header">
                    <h1 class="content-title">å‘½åç©ºé—´</h1>
                    <p class="content-subtitle">ç®¡ç†Kuberneteså‘½åç©ºé—´</p>
                    <div style="margin-top: 16px; display: flex; gap: 16px; align-items: flex-start; flex-wrap: wrap;">
                        <div style="margin-top: 5px;">
                            <label for="namespaceCluster" style="margin-right: 24px; font-weight: 600;">K8sé›†ç¾¤:</label>
                            <select id="namespaceCluster" onchange="loadNamespaces()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">è¯·é€‰æ‹©é›†ç¾¤</option>
                            </select>
                        </div>
                        <div style="margin-top: 28px; display: flex; gap: 10px; align-items: center;">
                            <input type="text" id="namespaceSearch" placeholder="æœç´¢å‘½åç©ºé—´..." onkeypress="if(event.key === 'Enter') searchNamespaces()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px; width: 300px;">
                            <button class="btn-primary" onclick="searchNamespaces()">æœç´¢</button>
                            <button class="btn-secondary" onclick="clearNamespaceSearch()">æ¸…ç©º</button>
                        </div>
                        <div style="margin-top: 30px;">
                            <button class="btn-primary" onclick="loadNamespaces()">åˆ·æ–°</button>
                            <button class="btn-primary" onclick="openAddNamespaceModal()" style="margin-left: 16px;">æ–°å»ºå‘½åç©ºé—´</button>
                        </div>
                    </div>
                </div>
                <div class="container">
                    <table class="user-table" id="namespacesTable">
                        <thead>
                            <tr>
                                <th style="width: 240px; text-align: center;">å‘½åç©ºé—´åç§°</th>
                                <th style="width: 220px; text-align: center;">åˆ›å»ºæ—¶é—´</th>
                                <th style="width: 120px; text-align: center;">æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="3" style="text-align: center; color: #999;">è¯·é€‰æ‹©é›†ç¾¤æŸ¥çœ‹å‘½åç©ºé—´åˆ—è¡¨</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- å·¥ä½œè´Ÿè½½ç®¡ç†å†…å®¹ -->
            <div id="workloadContent" style="display: none;">
                <style>
                    /* å·¥ä½œè´Ÿè½½é¡µé¢æ ·å¼ */
                    #workloadContent .user-table th {
                        text-align: center !important;
                    }
                </style>
                <div class="content-header">
                    <h1 class="content-title">å·¥ä½œè´Ÿè½½</h1>
                    <p class="content-subtitle">ç®¡ç†Kuberneteså·¥ä½œè´Ÿè½½</p>
                    <div style="margin-top: 16px; display: flex; gap: 16px; align-items: flex-start; flex-wrap: wrap;">
                        <div style="margin-top: 5px;">
                            <label for="workloadCluster" style="margin-right: 24px; font-weight: 600;">K8sé›†ç¾¤:</label>
                            <select id="workloadCluster" onchange="loadWorkloadNamespaces()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">è¯·é€‰æ‹©é›†ç¾¤</option>
                            </select>
                        </div>
                        <div style="margin-top: 5px;">
                            <label for="workloadNamespace" style="margin-right: 24px; font-weight: 600;">å‘½åç©ºé—´:</label>
                            <select id="workloadNamespace" onchange="loadWorkloadsList()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">è¯·é€‰æ‹©å‘½åç©ºé—´</option>
                            </select>
                        </div>
                        <div style="margin-top: 5px;">
                            <label for="workloadTypeFilter" style="margin-right: 24px; font-weight: 600;">å·¥ä½œè´Ÿè½½ç±»å‹:</label>
                            <select id="workloadTypeFilter" onchange="loadWorkloadsList()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">æ‰€æœ‰ç±»å‹</option>
                                <option value="deployment">Deployment</option>
                                <option value="statefulset">StatefulSet</option>
                                <option value="daemonset">DaemonSet</option>
                                <option value="job">Job</option>
                                <option value="cronjob">CronJob</option>
                            </select>
                        </div>
                    </div>
                    <div style="margin-top: 16px; display: flex; gap: 16px; align-items: flex-start; flex-wrap: wrap;">
                        <div style="margin-top: 5px; display: flex; gap: 10px; align-items: center;">
                            <input type="text" id="workloadSearch" placeholder="æœç´¢å·¥ä½œè´Ÿè½½åç§°..." onkeypress="if(event.key === 'Enter') searchWorkloads()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px; width: 300px;">
                            <button class="btn-primary" onclick="searchWorkloads()">æœç´¢</button>
                            <button class="btn-secondary" onclick="clearWorkloadSearch()">æ¸…ç©º</button>
                            <button class="btn-primary" onclick="loadWorkloadsList()">åˆ·æ–°</button>
                        </div>
                    </div>
                </div>
                <div class="container">
                    <table class="user-table" id="workloadsTable">
                        <thead>
                            <tr>
                                <th style="width: 200px;">åç§°</th>
                                <th style="width: 120px;">ç±»å‹</th>
                                <th style="width: 150px;">å‘½åç©ºé—´</th>
                                <th style="width: 160px;">å°±ç»ªå‰¯æœ¬/æœŸæœ›å‰¯æœ¬</th>
                                <th style="width: 120px;">çŠ¶æ€</th>
                                <th style="width: 160px;">åˆ›å»ºæ—¶é—´</th>
                                <th style="width: 100px;">æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="7" style="text-align: center; color: #999;">è¯·é€‰æ‹©é›†ç¾¤å’Œå‘½åç©ºé—´</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Podç®¡ç†å†…å®¹ -->
            <div id="podContent" style="display: none;">
                <div class="content-header">
                    <h1 class="content-title">Podç®¡ç†</h1>
                    <p class="content-subtitle">ç®¡ç†Kubernetes Pod</p>
                    <div style="margin-top: 16px; display: flex; gap: 16px; align-items: flex-start; flex-wrap: wrap;">
                        <div style="margin-top: 5px;">
                            <label for="podCluster" style="margin-right: 24px; font-weight: 600;">K8sé›†ç¾¤:</label>
                            <select id="podCluster" onchange="loadPodNamespaces()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">è¯·é€‰æ‹©é›†ç¾¤</option>
                            </select>
                        </div>
                        <div style="margin-top: 5px;">
                            <label for="podNamespace" style="margin-right: 24px; font-weight: 600;">å‘½åç©ºé—´:</label>
                            <select id="podNamespace" onchange="loadPodWorkloads()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">è¯·é€‰æ‹©å‘½åç©ºé—´</option>
                            </select>
                        </div>
                        <div style="margin-top: 5px;">
                            <label for="podWorkload" style="margin-right: 24px; font-weight: 600;">å·¥ä½œè´Ÿè½½:</label>
                            <select id="podWorkload" onchange="loadPodsList()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">å…¨éƒ¨å·¥ä½œè´Ÿè½½</option>
                            </select>
                        </div>
                    </div>
                    <div style="margin-top: 16px; display: flex; gap: 16px; align-items: flex-start; flex-wrap: wrap;">
                        <div style="margin-top: 5px; display: flex; gap: 10px; align-items: center;">
                            <input type="text" id="podSearch" placeholder="æœç´¢Podåç§°..." onkeypress="if(event.key === 'Enter') searchPods()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px; width: 300px;">
                            <button class="btn-primary" onclick="searchPods()">æœç´¢</button>
                            <button class="btn-secondary" onclick="clearPodSearch()">æ¸…ç©º</button>
                            <button class="btn-primary" onclick="loadPodsList()">åˆ·æ–°</button>
                        </div>
                    </div>
                </div>
                <div class="container">
                    <div id="podMessage"></div>
                    <style>
                        /* Podç®¡ç†é¡µé¢æ ·å¼ */
                        #podsTable th,
                        #podsTable td {
                            text-align: center !important;
                            vertical-align: middle !important;
                        }
                        /* Podåç§°æ ‡ç­¾å±…ä¸­ï¼Œå†…å®¹é å·¦ */
                        #podsTable th:first-child {
                            text-align: center !important;
                        }
                        #podsTable td:first-child {
                            text-align: left !important;
                        }
                        /* ç¡®ä¿é€‰æ‹©å™¨æ ‡ç­¾å±…ä¸­ */
                        .select-section label {
                            text-align: center;
                            display: block;
                            margin-bottom: 5px;
                        }
                    </style>
                    <table class="user-table" id="podsTable">
                        <thead>
                            <tr>
                                <th style="width: 250px;">Podåç§°</th>
                                <th style="width: 120px;">çŠ¶æ€</th>
                                <th style="width: 150px;">èŠ‚ç‚¹</th>
                                <th style="width: 130px;">IPåœ°å€</th>
                                <th style="width: 120px;">é‡å¯æ¬¡æ•°</th>
                                <th style="width: 120px;">æ˜¯å¦è¸¢å‡ºè´Ÿè½½</th>
                                <th style="width: 160px;">åˆ›å»ºæ—¶é—´</th>
                                <th style="width: 100px;">æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="8" style="text-align: center; color: #999;">è¯·é€‰æ‹©é›†ç¾¤å’Œå‘½åç©ºé—´</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- æœåŠ¡ä¸è·¯ç”±ç®¡ç†å†…å®¹ -->
            <div id="serviceContent" style="display: none;">
                <style>
                    /* æœåŠ¡ä¸è·¯ç”±é¡µé¢æ ·å¼ */
                    #serviceContent .content-title,
                    #serviceContent .content-subtitle {
                        text-align: left;
                    }
                    
                    #serviceContent .user-table th {
                        text-align: center !important;
                    }
                </style>
                <div class="content-header">
                    <h1 class="content-title">æœåŠ¡ä¸è·¯ç”±</h1>
                    <p class="content-subtitle">ç®¡ç†KubernetesæœåŠ¡å’Œè·¯ç”±</p>
                    <div style="margin-top: 16px; display: flex; gap: 16px; align-items: flex-start; flex-wrap: wrap;">
                        <div style="margin-top: 5px;">
                            <label for="serviceCluster" style="margin-right: 24px; font-weight: 600;">K8sé›†ç¾¤:</label>
                            <select id="serviceCluster" onchange="loadServiceNamespaces()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">è¯·é€‰æ‹©é›†ç¾¤</option>
                            </select>
                        </div>
                        <div style="margin-top: 5px;">
                            <label for="serviceNamespace" style="margin-right: 24px; font-weight: 600;">å‘½åç©ºé—´:</label>
                            <select id="serviceNamespace" onchange="loadServicesList()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">è¯·é€‰æ‹©å‘½åç©ºé—´</option>
                            </select>
                        </div>
                        <div style="margin-top: 5px;">
                            <label for="serviceTypeFilter" style="margin-right: 24px; font-weight: 600;">èµ„æºç±»å‹:</label>
                            <select id="serviceTypeFilter" onchange="loadServicesList()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">æ‰€æœ‰ç±»å‹</option>
                                <option value="service">Service</option>
                                <option value="ingress">Ingress</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="container">
                    <table class="user-table" id="servicesTable">
                        <thead>
                            <tr>
                                <th>åç§°</th>
                                <th>ç±»å‹</th>
                                <th>å‘½åç©ºé—´</th>
                                <th>IPåœ°å€</th>
                                <th>ç«¯å£</th>
                                <th>çŠ¶æ€</th>
                                <th>åˆ›å»ºæ—¶é—´</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="8" style="text-align: center; color: #999;">è¯·é€‰æ‹©é›†ç¾¤å’Œå‘½åç©ºé—´</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- é…ç½®ç®¡ç†å†…å®¹ -->
            <div id="configContent" style="display: none;">
                <style>
                    /* é…ç½®ç®¡ç†é¡µé¢æ ·å¼ */
                    #configContent .user-table th {
                        text-align: center !important;
                    }
                </style>
                <div class="content-header">
                    <h1 class="content-title">é…ç½®ç®¡ç†</h1>
                    <p class="content-subtitle">ç®¡ç†Kubernetesé…ç½®èµ„æº</p>
                    <div style="margin-top: 16px; display: flex; gap: 16px; align-items: flex-start; flex-wrap: wrap;">
                        <div style="margin-top: 5px;">
                            <label for="configCluster" style="margin-right: 24px; font-weight: 600;">K8sé›†ç¾¤:</label>
                            <select id="configCluster" onchange="loadConfigNamespaces()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">è¯·é€‰æ‹©é›†ç¾¤</option>
                            </select>
                        </div>
                        <div style="margin-top: 5px;">
                            <label for="configNamespace" style="margin-right: 24px; font-weight: 600;">å‘½åç©ºé—´:</label>
                            <select id="configNamespace" onchange="loadConfigsList()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">è¯·é€‰æ‹©å‘½åç©ºé—´</option>
                            </select>
                        </div>
                        <div style="margin-top: 5px;">
                            <label for="configTypeFilter" style="margin-right: 24px; font-weight: 600;">é…ç½®ç±»å‹:</label>
                            <select id="configTypeFilter" onchange="loadConfigsList()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">æ‰€æœ‰ç±»å‹</option>
                                <option value="configmap">ConfigMap</option>
                                <option value="secret">Secret</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="container">
                    <table class="user-table" id="configsTable">
                        <thead>
                            <tr>
                                <th style="width: 180px;">åç§°</th>
                                <th style="width: 120px;">ç±»å‹</th>
                                <th style="width: 150px;">å‘½åç©ºé—´</th>
                                <th style="width: 100px;">æ•°æ®é¡¹</th>
                                <th style="width: 160px;">åˆ›å»ºæ—¶é—´</th>
                                <th style="width: 100px;">æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="6" style="text-align: center; color: #999;">è¯·é€‰æ‹©é›†ç¾¤å’Œå‘½åç©ºé—´</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- å­˜å‚¨ç®¡ç†å†…å®¹ -->
            <div id="storageContent" style="display: none;">
                <style>
                    /* å­˜å‚¨ç®¡ç†é¡µé¢æ ·å¼ */
                    #storageContent .user-table th {
                        text-align: center !important;
                    }
                </style>
                <div class="content-header">
                    <h1 class="content-title">å­˜å‚¨ç®¡ç†</h1>
                    <p class="content-subtitle">ç®¡ç†Kuberneteså­˜å‚¨èµ„æº</p>
                    <div style="margin-top: 16px; display: flex; gap: 16px; align-items: flex-start; flex-wrap: wrap;">
                        <div style="margin-top: 5px;">
                            <label for="storageCluster" style="margin-right: 24px; font-weight: 600;">K8sé›†ç¾¤:</label>
                            <select id="storageCluster" onchange="loadStorageNamespaces()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">è¯·é€‰æ‹©é›†ç¾¤</option>
                            </select>
                        </div>
                        <div style="margin-top: 5px;">
                            <label for="storageNamespace" style="margin-right: 24px; font-weight: 600;">å‘½åç©ºé—´:</label>
                            <select id="storageNamespace" onchange="loadStorageList()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">è¯·é€‰æ‹©å‘½åç©ºé—´</option>
                            </select>
                        </div>
                        <div style="margin-top: 5px;">
                            <label for="storageTypeFilter" style="margin-right: 24px; font-weight: 600;">å­˜å‚¨ç±»å‹:</label>
                            <select id="storageTypeFilter" onchange="loadStorageList()" style="padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                                <option value="">æ‰€æœ‰ç±»å‹</option>
                                <option value="pv">PersistentVolume</option>
                                <option value="pvc">PersistentVolumeClaim</option>
                                <option value="storageclass">StorageClass</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="container">
                    <table class="user-table" id="storageTable">
                        <thead>
                            <tr>
                                <th style="width: 180px;">åç§°</th>
                                <th style="width: 120px;">ç±»å‹</th>
                                <th style="width: 150px;">å‘½åç©ºé—´</th>
                                <th style="width: 120px;">å®¹é‡</th>
                                <th style="width: 100px;">çŠ¶æ€</th>
                                <th style="width: 160px;">åˆ›å»ºæ—¶é—´</th>
                                <th style="width: 100px;">æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="7" style="text-align: center; color: #999;">è¯·é€‰æ‹©é›†ç¾¤å’Œå‘½åç©ºé—´</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>
    
    <!-- æ·»åŠ ç”¨æˆ·æ¨¡æ€æ¡† -->
    <div id="userModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeUserModal()">&times;</span>
            <h3 id="userModalTitle">æ·»åŠ ç”¨æˆ·</h3>
            <form id="userForm">
                <input type="hidden" id="editUsername">
                
                <div class="form-group">
                    <label for="username">ç”¨æˆ·å *</label>
                    <input type="text" id="username" name="username" required>
                </div>
                
                <div class="form-group">
                    <label for="password">å¯†ç  * <small>(ç¼–è¾‘æ—¶ç•™ç©ºè¡¨ç¤ºä¸ä¿®æ”¹å¯†ç ï¼Œè¾“å…¥æ–°å¯†ç è¡¨ç¤ºä¿®æ”¹å¯†ç )</small></label>
                    <input type="password" id="password" name="password" placeholder="å¯†ç ">
                </div>
                
                <div class="permissions-section">
                    <div class="permissions-title">å…¨å±€æƒé™è®¾ç½®</div>
                    <div class="permissions-grid">
                        <div class="permission-item">
                            <input type="checkbox" id="adminPermission" name="adminPermission" value="true">
                            <label for="adminPermission">
                                å…¨å±€ç®¡ç†å‘˜æƒé™
                            </label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="readPermission" name="readPermission" value="true">
                            <label for="readPermission">
                                å…¨å±€è¯»æƒé™
                            </label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="writePermission" name="writePermission" value="true">
                            <label for="writePermission">
                                å…¨å±€å†™æƒé™
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="permissions-section">
                    <div class="permissions-title">é›†ç¾¤æƒé™è®¾ç½®</div>
                    <div id="clusterPermissions" style="margin-bottom: 20px;">
                        <div style="text-align: center; color: #64748b; padding: 20px;">åŠ è½½é›†ç¾¤åˆ—è¡¨ä¸­...</div>
                    </div>
                </div>
                
                <div style="text-align: right; margin-top: 20px;">
                    <button type="button" class="btn" style="background-color: #f5f5f5; color: #333; margin-right: 10px;" onclick="closeUserModal()">å–æ¶ˆ</button>
                    <button type="submit" class="btn-primary">ä¿å­˜</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- æœåŠ¡YAMLæŸ¥çœ‹æ¨¡æ€æ¡† -->
    <div id="serviceYamlModal" class="modal">
        <div class="modal-content" style="width: 90%; max-width: 1200px; max-height: 80vh; overflow: auto;">
            <span class="close" onclick="closeServiceYamlModal()">&times;</span>
            <h3 id="serviceYamlTitle">æœåŠ¡YAMLé…ç½®</h3>
            <div style="margin-top: 20px;">
                <pre style="background-color: #f8fafc; padding: 16px; border-radius: 8px; font-family: monospace; white-space: pre-wrap; word-wrap: break-word;"><code id="serviceYamlContent">åŠ è½½ä¸­...</code></pre>
            </div>
            <div style="text-align: right; margin-top: 20px;">
                <button type="button" class="btn-primary" onclick="closeServiceYamlModal()">å…³é—­</button>
            </div>
        </div>
    </div>
    
    <!-- é…ç½®èµ„æºYAMLæŸ¥çœ‹æ¨¡æ€æ¡† -->
    <div id="configYamlModal" class="modal">
        <div class="modal-content" style="width: 90%; max-width: 1200px; max-height: 80vh; overflow: auto;">
            <span class="close" onclick="closeConfigYamlModal()">&times;</span>
            <h3 id="configYamlTitle">é…ç½®èµ„æºYAMLé…ç½®</h3>
            <div style="margin-top: 20px;">
                <pre style="background-color: #f8fafc; padding: 16px; border-radius: 8px; font-family: monospace; white-space: pre-wrap; word-wrap: break-word;"><code id="configYamlContent">åŠ è½½ä¸­...</code></pre>
            </div>
            <div style="text-align: right; margin-top: 20px;">
                <button type="button" class="btn-primary" onclick="closeConfigYamlModal()">å…³é—­</button>
            </div>
        </div>
    </div>
    
    <!-- å­˜å‚¨èµ„æºYAMLæŸ¥çœ‹æ¨¡æ€æ¡† -->
    <div id="storageYamlModal" class="modal">
        <div class="modal-content" style="width: 90%; max-width: 1200px; max-height: 80vh; overflow: auto;">
            <span class="close" onclick="closeStorageYamlModal()">&times;</span>
            <h3 id="storageYamlTitle">å­˜å‚¨èµ„æºYAMLé…ç½®</h3>
            <div style="margin-top: 20px;">
                <pre style="background-color: #f8fafc; padding: 16px; border-radius: 8px; font-family: monospace; white-space: pre-wrap; word-wrap: break-word;"><code id="storageYamlContent">åŠ è½½ä¸­...</code></pre>
            </div>
            <div style="text-align: right; margin-top: 20px;">
                <button type="button" class="btn-primary" onclick="closeStorageYamlModal()">å…³é—­</button>
            </div>
        </div>
    </div>
    
    <!-- å·¥ä½œè´Ÿè½½YAMLæŸ¥çœ‹æ¨¡æ€æ¡† -->
    <div id="workloadYamlModal" class="modal">
        <div class="modal-content" style="width: 90%; max-width: 1200px; max-height: 80vh; overflow: auto;">
            <span class="close" onclick="closeWorkloadYamlModal()">&times;</span>
            <h3 id="workloadYamlTitle">å·¥ä½œè´Ÿè½½YAMLé…ç½®</h3>
            <div style="margin-top: 20px;">
                <pre style="background-color: #f8fafc; padding: 16px; border-radius: 8px; font-family: monospace; white-space: pre-wrap; word-wrap: break-word;"><code id="workloadYamlContent">åŠ è½½ä¸­...</code></pre>
            </div>
            <div style="text-align: right; margin-top: 20px;">
                <button type="button" class="btn-primary" onclick="closeWorkloadYamlModal()">å…³é—­</button>
            </div>
        </div>
    </div>
    
    <!-- æ·»åŠ é›†ç¾¤æ¨¡æ€æ¡† -->
    <div id="clusterModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeClusterModal()">&times;</span>
            <h3 id="clusterModalTitle">æ·»åŠ é›†ç¾¤</h3>
            <form id="clusterForm">
                <input type="hidden" id="editClusterName">
                
                <div class="form-group">
                    <label for="clusterName">é›†ç¾¤åç§° *</label>
                    <input type="text" id="clusterName" name="clusterName" required>
                </div>
                
                <div class="form-group">
                    <label for="displayName">æ˜¾ç¤ºåç§° *</label>
                    <input type="text" id="displayName" name="displayName" required>
                </div>
                
                <div class="form-group">
                    <label for="kubeconfigContent">Kubeconfigå†…å®¹ *</label>
                    <textarea id="kubeconfigContent" name="kubeconfigContent" rows="10" required placeholder="è¯·ç²˜è´´å®Œæ•´çš„kubeconfigå†…å®¹"></textarea>
                </div>
                
                <div style="text-align: right; margin-top: 20px;">
                    <button type="button" class="btn" style="background-color: #f5f5f5; color: #333; margin-right: 10px;" onclick="closeClusterModal()">å–æ¶ˆ</button>
                    <button type="submit" class="btn-primary">ä¿å­˜</button>
                </div>
            </form>
        </div>
    </div>
    
    <script>
        // å½“å‰æ¿€æ´»çš„å†…å®¹æ¨¡å—
        let activeModule = 'cluster';
        
        // é¡µé¢åŠ è½½æ—¶è·å–æ‰€æœ‰é›†ç¾¤
        window.onload = function() {
            initialize();
        };
        
        function initialize() {
            // åˆå§‹åŒ–å¯¼èˆªäº‹ä»¶
            initNavigation();
            
            // åˆå§‹åŒ–è‡ªåŠ¨ç™»å‡º
            initializeAutoLogout();
            
            // åˆå§‹åŒ–å½“å‰ç”¨æˆ·
            getCurrentUser();
            
            // åŠ è½½é»˜è®¤æ¨¡å—å†…å®¹
            loadClusterContent();
        }
        
        // åˆå§‹åŒ–å¯¼èˆª
        function initNavigation() {
            // é›†ç¾¤ç®¡ç†å¯¼èˆª
            document.getElementById('clusterNav').addEventListener('click', function(e) {
                e.preventDefault();
                switchModule('cluster');
            });
            
            // é›†ç¾¤ç®¡ç†ä¸‹æ‹‰èœå•
            document.getElementById('clusterMgmtNav').addEventListener('click', function(e) {
                e.preventDefault();
                toggleNavDropdown('clusterMgmt');
            });
            

            
            // ç”¨æˆ·ç®¡ç†å¯¼èˆª
            document.getElementById('userNav').addEventListener('click', function(e) {
                e.preventDefault();
                switchModule('user');
            });
            
            // æ—¥å¿—ç®¡ç†å¯¼èˆª
            document.getElementById('logNav').addEventListener('click', function(e) {
                e.preventDefault();
                switchModule('log');
            });
        }
        
        // åˆ‡æ¢å¯¼èˆªä¸‹æ‹‰èœå•
        function toggleNavDropdown(dropdownId) {
            const toggle = document.getElementById(`${dropdownId}Nav`);
            const menu = document.getElementById(`${dropdownId}Menu`);
            toggle.classList.toggle('active');
            menu.classList.toggle('active');
        }
        
        // åˆ‡æ¢æ¨¡å—
        function switchModule(moduleName) {
            // æ›´æ–°å¯¼èˆªçŠ¶æ€
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            document.getElementById(`${moduleName}Nav`).classList.add('active');
            
            // éšè—æ‰€æœ‰å†…å®¹
            document.getElementById('clusterContent').style.display = 'none';
            document.getElementById('userContent').style.display = 'none';
            document.getElementById('logContent').style.display = 'none';
            document.getElementById('nodeContent').style.display = 'none';
            document.getElementById('namespaceContent').style.display = 'none';
            document.getElementById('workloadContent').style.display = 'none';
            document.getElementById('podContent').style.display = 'none';
            document.getElementById('serviceContent').style.display = 'none';
            document.getElementById('configContent').style.display = 'none';
            document.getElementById('storageContent').style.display = 'none';
            
            // æ˜¾ç¤ºå¯¹åº”å†…å®¹
            switch(moduleName) {
                case 'cluster':
                    loadClusterContent();
                    break;
                case 'user':
                    loadUserContent();
                    break;
                case 'log':
                    loadLogContent();
                    break;
                case 'node':
                    loadNodeContent();
                    break;
                case 'namespace':
                    loadNamespaceContent();
                    break;
                case 'workload':
                    loadWorkloadContent();
                    break;
                case 'pod':
                    loadPodContent();
                    break;
                case 'service':
                    loadServiceContent();
                    break;
                case 'config':
                    loadConfigContent();
                    break;
                case 'storage':
                    loadStorageContent();
                    break;
            }
            
            activeModule = moduleName;
        }
        
        // 10åˆ†é’Ÿä¸æ´»åŠ¨è‡ªåŠ¨ç™»å‡ºåŠŸèƒ½
        let logoutTimer;
        const INACTIVITY_TIMEOUT = 10 * 60 * 1000; // 10åˆ†é’Ÿ

        function initializeAutoLogout() {
            // é‡ç½®å®šæ—¶å™¨
            resetLogoutTimer();

            // ç›‘å¬ç”¨æˆ·æ´»åŠ¨äº‹ä»¶
            const activityEvents = ['mousemove', 'keydown', 'click', 'scroll', 'touchstart'];
            activityEvents.forEach(event => {
                document.addEventListener(event, resetLogoutTimer);
            });
        }

        function resetLogoutTimer() {
            clearTimeout(logoutTimer);
            logoutTimer = setTimeout(autoLogout, INACTIVITY_TIMEOUT);
        }

        function autoLogout() {
            fetch('/api/logout', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(() => {
                // è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢
                window.location.href = '/login?message=ç”±äºé•¿æ—¶é—´ä¸æ´»åŠ¨ï¼Œæ‚¨å·²è‡ªåŠ¨ç™»å‡º';
            })
            .catch(() => {
                // å³ä½¿è¯·æ±‚å¤±è´¥ï¼Œä¹Ÿè¦è·³è½¬åˆ°ç™»å½•é¡µé¢
                window.location.href = '/login?message=ç”±äºé•¿æ—¶é—´ä¸æ´»åŠ¨ï¼Œæ‚¨å·²è‡ªåŠ¨ç™»å‡º';
            });
        }
        
        // åŠ è½½é›†ç¾¤å†…å®¹
        function loadClusterContent() {
            document.getElementById('clusterContent').style.display = 'block';
            loadClusters();
        }
        
        // åŠ è½½é›†ç¾¤åˆ—è¡¨
        function loadClusters() {
            fetch('/api/clusters')
                .then(response => response.json())
                .then(data => {
                    const clusterSection = document.getElementById('clusterSection');
                    
                    if (Array.isArray(data) && data.length > 0) {
                        let clusterHTML = '';
                        data.forEach(cluster => {
                            // ä½¿ç”¨APIè¿”å›çš„çœŸå®é›†ç¾¤ç‰ˆæœ¬
                            const version = cluster.version || 'Unknown';
                            // ç¡¬ç¼–ç çš„æ·»åŠ æ—¶é—´ï¼ˆå®é™…åº”è¯¥ä»é›†ç¾¤é…ç½®æˆ–APIè·å–ï¼‰
                            const addedTime = '2024-12-05 16:00';
                            
                            clusterHTML += `
                                <div class="cluster-card">
                                    <div class="cluster-header">
                                        <div class="cluster-name">${cluster.display_name || cluster.name}</div>
                                        <div class="cluster-status active">æ´»è·ƒ</div>
                                    </div>
                                    <div class="cluster-info">
                                        <div class="info-item">
                                            <span class="info-label">é›†ç¾¤åç§°</span>
                                            <span class="info-value">${cluster.name}</span>
                                        </div>
                                        <div class="info-item">
                                            <span class="info-label">é›†ç¾¤ç‰ˆæœ¬</span>
                                            <span class="info-value">${version}</span>
                                        </div>
                                        <div class="info-item">
                                            <span class="info-label">æ·»åŠ æ—¶é—´</span>
                                            <span class="info-value">${addedTime}</span>
                                        </div>
                                    </div>
                                    <div class="action-buttons">
                                        <button class="btn-primary" onclick="viewCluster('${cluster.name}')">æŸ¥çœ‹è¯¦æƒ…</button>
                                        <button class="btn-edit" onclick="editCluster('${cluster.name}')">ç¼–è¾‘</button>
                                        <button class="btn-delete" onclick="deleteCluster('${cluster.name}')">åˆ é™¤</button>
                                    </div>
                                </div>
                            `;
                        });
                        
                        clusterSection.innerHTML = clusterHTML;
                    } else {
                        clusterSection.innerHTML = `
                            <div class="empty-state">
                                <div class="empty-state-icon">ğŸ“¦</div>
                                <div class="empty-state-title">æš‚æ— é›†ç¾¤</div>
                                <div class="empty-state-description">è¯·æ·»åŠ Kubernetesé›†ç¾¤ä»¥å¼€å§‹ç®¡ç†</div>
                                <div style="margin-top: 20px;">
                                    <button class="btn-primary" onclick="addCluster()">æ·»åŠ é›†ç¾¤</button>
                                </div>
                            </div>
                        `;
                    }
                })
                .catch(error => {
                    const clusterSection = document.getElementById('clusterSection');
                    clusterSection.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">âŒ</div>
                            <div class="empty-state-title">åŠ è½½å¤±è´¥</div>
                            <div class="empty-state-description">æ— æ³•åŠ è½½é›†ç¾¤åˆ—è¡¨ï¼Œè¯·ç¨åé‡è¯•</div>
                            <div style="margin-top: 20px;">
                                <button class="btn-primary" onclick="loadClusters()">é‡è¯•</button>
                            </div>
                        </div>
                    `;
                });
        }
        
        // é›†ç¾¤æ“ä½œå‡½æ•°
        function viewCluster(clusterName) {
            console.log('æŸ¥çœ‹é›†ç¾¤:', clusterName);
        }
        
        function manageCluster(clusterName) {
            console.log('ç®¡ç†é›†ç¾¤:', clusterName);
        }
        
        // æ‰“å¼€æ·»åŠ é›†ç¾¤æ¨¡æ€æ¡†
        function addCluster() {
            document.getElementById('clusterModalTitle').textContent = 'æ·»åŠ é›†ç¾¤';
            document.getElementById('clusterForm').reset();
            document.getElementById('editClusterName').value = '';
            document.getElementById('clusterModal').style.display = 'block';
        }
        
        // å…³é—­é›†ç¾¤æ¨¡æ€æ¡†
        function closeClusterModal() {
            document.getElementById('clusterModal').style.display = 'none';
        }
        
        // ç¼–è¾‘é›†ç¾¤åŠŸèƒ½
        function editCluster(clusterName) {
            fetch(`/api/admin/clusters/${clusterName}`)
                .then(response => response.json())
                .then(cluster => {
                    document.getElementById('clusterModalTitle').textContent = 'ç¼–è¾‘é›†ç¾¤';
                    document.getElementById('editClusterName').value = cluster.name;
                    document.getElementById('clusterName').value = cluster.name;
                    document.getElementById('clusterName').disabled = true;
                    document.getElementById('displayName').value = cluster.display_name;
                    document.getElementById('kubeconfigContent').value = cluster.kubeconfig_content;
                    document.getElementById('clusterModal').style.display = 'block';
                })
                .catch(error => {
                    alert('åŠ è½½é›†ç¾¤é…ç½®å¤±è´¥: ' + error.message);
                });
        }
        
        // åˆ é™¤é›†ç¾¤åŠŸèƒ½
        function deleteCluster(clusterName) {
            if (confirm(`ç¡®å®šè¦åˆ é™¤é›†ç¾¤ "${clusterName}" å—ï¼Ÿ`)) {
                fetch(`/api/admin/clusters/${clusterName}`, {
                    method: 'DELETE'
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert(data.message);
                        // é‡æ–°åŠ è½½é›†ç¾¤åˆ—è¡¨
                        if (activeModule === 'cluster') {
                            loadClusters();
                        }
                        if (activeModule === 'load') {
                            loadClustersForLoad();
                        }
                    } else {
                        alert('åˆ é™¤é›†ç¾¤å¤±è´¥: ' + data.message);
                    }
                })
                .catch(error => {
                    alert('åˆ é™¤é›†ç¾¤å¤±è´¥: ' + error.message);
                });
            }
        }
        
        // é›†ç¾¤è¡¨å•æäº¤å¤„ç†
        document.getElementById('clusterForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const editClusterName = document.getElementById('editClusterName').value;
            const clusterName = document.getElementById('clusterName').value;
            const displayName = document.getElementById('displayName').value;
            const kubeconfigContent = document.getElementById('kubeconfigContent').value;
            
            // æ„å»ºè¯·æ±‚æ•°æ®
            const requestData = {
                name: clusterName,
                display_name: displayName,
                kubeconfig_content: kubeconfigContent
            };
            
            let url = '/api/admin/clusters';
            let method = 'POST';
            
            // å¦‚æœæ˜¯ç¼–è¾‘æ¨¡å¼ï¼Œä½¿ç”¨PUTè¯·æ±‚
            if (editClusterName) {
                url = `/api/admin/clusters/${editClusterName}`;
                method = 'PUT';
            }
            
            fetch(url, {
                method: method,
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(requestData)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                    alert(data.message);
                    closeClusterModal();
                    // é‡æ–°åŠ è½½é›†ç¾¤åˆ—è¡¨
                    if (activeModule === 'cluster') {
                        loadClusters();
                    }
                    if (activeModule === 'load') {
                        loadClustersForLoad();
                        
                    }
                } else {
                    // æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
                    alert('æ“ä½œå¤±è´¥: ' + data.message);
                }
            })
            .catch(error => {
                alert('æ“ä½œå¤±è´¥: ' + error.message);
            });
        });
        
        // å…³é—­é›†ç¾¤æ¨¡æ€æ¡†æ—¶æ¢å¤è¾“å…¥æ¡†çŠ¶æ€
        function closeClusterModal() {
            document.getElementById('clusterModal').style.display = 'none';
            document.getElementById('clusterName').disabled = false;
        }
        
        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­æ¨¡æ€æ¡†
        window.addEventListener('click', function(event) {
            const clusterModal = document.getElementById('clusterModal');
            if (event.target == clusterModal) {
                closeClusterModal();
            }
        });
        

        
        // æ˜¾ç¤ºæ¶ˆæ¯çš„é€šç”¨å‡½æ•°
        function showPodMessage(text, type, messageDivId = 'podMessage') {
            const messageDiv = document.getElementById(messageDivId);
            messageDiv.innerHTML = `<div class="message ${type}">${text}</div>`;
            setTimeout(() => {
                messageDiv.innerHTML = '';
            }, 3000);
        }
        
        // è¸¢å‡ºè´Ÿè½½
        function removeLoad(cluster, namespace, podName, refreshFunction = 'loadPods') {
            fetch(`/api/${cluster}/${namespace}/pods/${podName}/remove-load`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // æ ¹æ®å½“å‰é¡µé¢è°ƒç”¨ä¸åŒçš„æ¶ˆæ¯æ˜¾ç¤ºå’Œåˆ·æ–°å‡½æ•°
                    if (refreshFunction === 'loadPodsList') {
                        showPodMessage(data.message, 'success', 'podMessage');
                        loadPodsList();
                    } else {
                        showMessage(data.message, 'success');
                        loadPods();
                    }
                } else {
                    // æ ¹æ®å½“å‰é¡µé¢è°ƒç”¨ä¸åŒçš„æ¶ˆæ¯æ˜¾ç¤ºå‡½æ•°
                    if (refreshFunction === 'loadPodsList') {
                        showPodMessage(data.error || 'æ“ä½œå¤±è´¥', 'error', 'podMessage');
                    } else {
                        showMessage(data.error || 'æ“ä½œå¤±è´¥', 'error');
                    }
                }
            })
            .catch(error => {
                // æ ¹æ®å½“å‰é¡µé¢è°ƒç”¨ä¸åŒçš„æ¶ˆæ¯æ˜¾ç¤ºå‡½æ•°
                if (refreshFunction === 'loadPodsList') {
                    showPodMessage('æ“ä½œå¤±è´¥: ' + error.message, 'error', 'podMessage');
                } else {
                    showMessage('æ“ä½œå¤±è´¥: ' + error.message, 'error');
                }
            });
        }
        
        // æ¢å¤æµé‡
        function restoreTraffic(cluster, namespace, podName, refreshFunction = 'loadPods') {
            fetch(`/api/${cluster}/${namespace}/pods/${podName}/restore-traffic`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // æ ¹æ®å½“å‰é¡µé¢è°ƒç”¨ä¸åŒçš„æ¶ˆæ¯æ˜¾ç¤ºå’Œåˆ·æ–°å‡½æ•°
                    if (refreshFunction === 'loadPodsList') {
                        showPodMessage(data.message, 'success', 'podMessage');
                        loadPodsList();
                    } else {
                        showMessage(data.message, 'success');
                        loadPods();
                    }
                } else {
                    // æ ¹æ®å½“å‰é¡µé¢è°ƒç”¨ä¸åŒçš„æ¶ˆæ¯æ˜¾ç¤ºå‡½æ•°
                    if (refreshFunction === 'loadPodsList') {
                        showPodMessage(data.error || 'æ“ä½œå¤±è´¥', 'error', 'podMessage');
                    } else {
                        showMessage(data.error || 'æ“ä½œå¤±è´¥', 'error');
                    }
                }
            })
            .catch(error => {
                // æ ¹æ®å½“å‰é¡µé¢è°ƒç”¨ä¸åŒçš„æ¶ˆæ¯æ˜¾ç¤ºå‡½æ•°
                if (refreshFunction === 'loadPodsList') {
                    showPodMessage('æ“ä½œå¤±è´¥: ' + error.message, 'error', 'podMessage');
                } else {
                    showMessage('æ“ä½œå¤±è´¥: ' + error.message, 'error');
                }
            });
        }
        
        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.innerHTML = `<div class="message ${type}">${text}</div>`;
            setTimeout(() => {
                messageDiv.innerHTML = '';
            }, 3000);
        }
        
        // åŠ è½½ç”¨æˆ·ç®¡ç†å†…å®¹
        function loadUserContent() {
            document.getElementById('userContent').style.display = 'block';
            loadUsers();
        }
        
        // åŠ è½½ç”¨æˆ·åˆ—è¡¨
        function loadUsers() {
            fetch('/api/admin/users')
                .then(response => response.json())
                .then(data => {
                    const userTable = document.getElementById('userTable').getElementsByTagName('tbody')[0];
                    
                    if (Array.isArray(data) && data.length > 0) {
                        let rows = '';
                        data.forEach(user => {
                            rows += `
                                <tr>
                                    <td>${user.username}</td>
                                    <td>${user.permissions.admin ? 'æ˜¯' : 'å¦'}</td>
                                    <td>${user.permissions.read ? 'æ˜¯' : 'å¦'}</td>
                                    <td>${user.permissions.write ? 'æ˜¯' : 'å¦'}</td>
                                    <td class="manage-buttons">
                                        <button class="btn-edit" onclick="openEditUserModal('${user.username}')">ç¼–è¾‘</button>
                                        <button class="btn-delete" onclick="deleteUser('${user.username}')">åˆ é™¤</button>
                                    </td>
                                </tr>
                            `;
                        });
                        userTable.innerHTML = rows;
                    } else {
                        userTable.innerHTML = '<tr><td colspan="5" style="text-align: center; color: #999;">æ²¡æœ‰ç”¨æˆ·é…ç½®</td></tr>';
                    }
                })
                .catch(error => {
                    showUserMessage('åŠ è½½ç”¨æˆ·åˆ—è¡¨å¤±è´¥: ' + error.message, 'error');
                    const userTable = document.getElementById('userTable').getElementsByTagName('tbody')[0];
                    userTable.innerHTML = '<tr><td colspan="5" style="text-align: center; color: #999;">åŠ è½½ç”¨æˆ·åˆ—è¡¨å¤±è´¥</td></tr>';
                });
        }
        
        // æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯
        function showUserMessage(text, type) {
            const messageDiv = document.getElementById('userMessage');
            messageDiv.innerHTML = `<div class="message ${type}">${text}</div>`;
            setTimeout(() => {
                messageDiv.innerHTML = '';
            }, 3000);
        }
        
        // åŠ è½½é›†ç¾¤åˆ—è¡¨ç”¨äºæƒé™è®¾ç½®
        function loadClustersForPermissions() {
            fetch('/api/clusters')
                .then(response => response.json())
                .then(data => {
                    const clusterPermissionsDiv = document.getElementById('clusterPermissions');
                    
                    if (Array.isArray(data) && data.length > 0) {
                        let clusterHTML = '<div class="permissions-grid">';
                        data.forEach(cluster => {
                            clusterHTML += `
                                <div class="permission-item">
                                    <input type="checkbox" id="cluster_${cluster.name}" name="clusterPermission" value="${cluster.name}">
                                    <label for="cluster_${cluster.name}">
                                        ${cluster.display_name || cluster.name}
                                    </label>
                                </div>
                            `;
                        });
                        clusterHTML += '</div>';
                        clusterPermissionsDiv.innerHTML = clusterHTML;
                    } else {
                        clusterPermissionsDiv.innerHTML = '<div style="text-align: center; color: #64748b; padding: 20px;">æš‚æ— é›†ç¾¤</div>';
                    }
                })
                .catch(error => {
                    const clusterPermissionsDiv = document.getElementById('clusterPermissions');
                    clusterPermissionsDiv.innerHTML = '<div style="text-align: center; color: #dc2626; padding: 20px;">åŠ è½½é›†ç¾¤åˆ—è¡¨å¤±è´¥</div>';
                });
        }
        
        // æ‰“å¼€æ·»åŠ ç”¨æˆ·æ¨¡æ€æ¡†
        function openAddUserModal() {
            document.getElementById('userModalTitle').textContent = 'æ·»åŠ ç”¨æˆ·';
            document.getElementById('userForm').reset();
            document.getElementById('editUsername').value = '';
            document.getElementById('username').disabled = false;
            document.getElementById('userModal').style.display = 'block';
            loadClustersForPermissions();
        }
        
        // æ‰“å¼€ç¼–è¾‘ç”¨æˆ·æ¨¡æ€æ¡†
        function openEditUserModal(username) {
            fetch(`/api/admin/users/${username}`)
                .then(response => response.json())
                .then(user => {
                    document.getElementById('userModalTitle').textContent = 'ç¼–è¾‘ç”¨æˆ·';
                    document.getElementById('editUsername').value = user.username;
                    document.getElementById('username').value = user.username;
                    document.getElementById('username').disabled = true;
                    document.getElementById('password').value = '';
                    document.getElementById('adminPermission').checked = user.permissions.admin || false;
                    document.getElementById('readPermission').checked = user.permissions.read || false;
                    document.getElementById('writePermission').checked = user.permissions.write || false;
                    document.getElementById('userModal').style.display = 'block';
                    
                    // åŠ è½½é›†ç¾¤åˆ—è¡¨å¹¶è®¾ç½®ç”¨æˆ·å·²æœ‰çš„é›†ç¾¤æƒé™
                    fetch('/api/clusters')
                        .then(response => response.json())
                        .then(clusters => {
                            const clusterPermissionsDiv = document.getElementById('clusterPermissions');
                            
                            if (Array.isArray(clusters) && clusters.length > 0) {
                                let clusterHTML = '<div class="permissions-grid">';
                                clusters.forEach(cluster => {
                                    const hasPermission = user.permissions.clusters && user.permissions.clusters.includes(cluster.name);
                                    clusterHTML += `
                                        <div class="permission-item">
                                            <input type="checkbox" id="cluster_${cluster.name}" name="clusterPermission" value="${cluster.name}" ${hasPermission ? 'checked' : ''}>
                                            <label for="cluster_${cluster.name}">
                                                ${cluster.display_name || cluster.name}
                                            </label>
                                        </div>
                                    `;
                                });
                                clusterHTML += '</div>';
                                clusterPermissionsDiv.innerHTML = clusterHTML;
                            } else {
                                clusterPermissionsDiv.innerHTML = '<div style="text-align: center; color: #64748b; padding: 20px;">æš‚æ— é›†ç¾¤</div>';
                            }
                        })
                        .catch(error => {
                            const clusterPermissionsDiv = document.getElementById('clusterPermissions');
                            clusterPermissionsDiv.innerHTML = '<div style="text-align: center; color: #dc2626; padding: 20px;">åŠ è½½é›†ç¾¤åˆ—è¡¨å¤±è´¥</div>';
                        });
                })
                .catch(error => {
                    showUserMessage('åŠ è½½ç”¨æˆ·é…ç½®å¤±è´¥: ' + error.message, 'error');
                });
        }
        
        // å…³é—­ç”¨æˆ·æ¨¡æ€æ¡†
        function closeUserModal() {
            document.getElementById('userModal').style.display = 'none';
            document.getElementById('username').disabled = false;
        }
        
        // ç”¨æˆ·è¡¨å•æäº¤å¤„ç†
        document.getElementById('userForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const editUsername = document.getElementById('editUsername').value;
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const adminPermission = document.getElementById('adminPermission').checked;
            const readPermission = document.getElementById('readPermission').checked;
            const writePermission = document.getElementById('writePermission').checked;
            
            // æ”¶é›†é€‰ä¸­çš„é›†ç¾¤æƒé™
            const selectedClusters = [];
            const clusterCheckboxes = document.querySelectorAll('input[name="clusterPermission"]:checked');
            clusterCheckboxes.forEach(checkbox => {
                selectedClusters.push(checkbox.value);
            });
            
            // æ„å»ºæƒé™å¯¹è±¡
            const permissions = {
                admin: adminPermission,
                read: readPermission,
                write: writePermission,
                clusters: selectedClusters
            };
            
            // æ„å»ºè¯·æ±‚æ•°æ®
            const requestData = {
                username: username,
                permissions: permissions
            };
            
            // åªæœ‰åœ¨æ·»åŠ ç”¨æˆ·æˆ–ä¿®æ”¹å¯†ç æ—¶æ‰åŒ…å«å¯†ç å­—æ®µ
            if (password || !editUsername) {
                requestData.password = password;
            }
            
            let url = '/api/admin/users';
            let method = 'POST';
            
            if (editUsername) {
                url = `/api/admin/users/${editUsername}`;
                method = 'PUT';
            }
            
            fetch(url, {
                method: method,
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(requestData)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showUserMessage(data.message, 'success');
                    closeUserModal();
                    loadUsers();
                } else {
                    showUserMessage(data.message, 'error');
                }
            })
            .catch(error => {
                showUserMessage('ä¿å­˜å¤±è´¥: ' + error.message, 'error');
            });
        });
        
        // åˆ é™¤ç”¨æˆ·
        function deleteUser(username) {
            if (confirm(`ç¡®å®šè¦åˆ é™¤ç”¨æˆ· "${username}" å—ï¼Ÿ`)) {
                fetch(`/api/admin/users/${username}`, {
                    method: 'DELETE'
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        showUserMessage(data.message, 'success');
                        loadUsers();
                    } else {
                        showUserMessage(data.message, 'error');
                    }
                })
                .catch(error => {
                    showUserMessage('åˆ é™¤å¤±è´¥: ' + error.message, 'error');
                });
            }
        }
        
        // æ—¥å¿—ç®¡ç†ç›¸å…³å˜é‡
        let logsData = [];
        
        // åŠ è½½æ—¥å¿—ç®¡ç†å†…å®¹
        function loadLogContent() {
            document.getElementById('logContent').style.display = 'block';
            loadLogs();
        }
        
        // åŠ è½½æ—¥å¿—åˆ—è¡¨
        function loadLogs() {
            const actionFilter = document.getElementById('logActionFilter').value;
            let url = '/api/admin/logs';
            
            if (actionFilter) {
                url += `?action=${actionFilter}`;
            }
            
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    logsData = data;
                    handleLogSearch(); // åº”ç”¨æ‰€æœ‰è¿‡æ»¤æ¡ä»¶
                })
                .catch(error => {
                    showLogMessage('åŠ è½½æ—¥å¿—åˆ—è¡¨å¤±è´¥: ' + error.message, 'error');
                    const logsTable = document.getElementById('logsTable').getElementsByTagName('tbody')[0];
                    logsTable.innerHTML = '<tr><td colspan="5" style="text-align: center; color: #999;">åŠ è½½æ—¥å¿—åˆ—è¡¨å¤±è´¥</td></tr>';
                });
        }
        
        // èŠ‚ç‚¹ç®¡ç†å†…å®¹åŠ è½½
        function loadNodeContent() {
            document.getElementById('nodeContent').style.display = 'block';
            // åŠ è½½é›†ç¾¤åˆ—è¡¨
            loadClustersForNodes();
        }
        
        // åŠ è½½é›†ç¾¤åˆ—è¡¨ï¼ˆç”¨äºèŠ‚ç‚¹ç®¡ç†ï¼‰
        function loadClustersForNodes() {
            fetch('/api/clusters')
                .then(response => response.json())
                .then(data => {
                    const clusterSelect = document.getElementById('nodeCluster');
                    clusterSelect.innerHTML = '<option value="">è¯·é€‰æ‹©é›†ç¾¤</option>';
                    data.forEach(cluster => {
                        const option = document.createElement('option');
                        option.value = cluster.name;
                        option.textContent = cluster.display_name || cluster.name;
                        clusterSelect.appendChild(option);
                    });
                })
                .catch(error => {
                    showNodeMessage('åŠ è½½é›†ç¾¤å¤±è´¥: ' + error.message, 'error');
                });
        }
        
        // æ˜¾ç¤ºèŠ‚ç‚¹æ¶ˆæ¯
        function showNodeMessage(text, type) {
            const messageDiv = document.getElementById('nodeMessage');
            messageDiv.innerHTML = `<div class="message ${type}">${text}</div>`;
            setTimeout(() => {
                messageDiv.innerHTML = '';
            }, 3000);
        }
        
        // å…¨å±€å˜é‡å­˜å‚¨èŠ‚ç‚¹æ•°æ®
        let allNodes = [];
        let currentCluster = '';
        
        // åŠ è½½èŠ‚ç‚¹åˆ—è¡¨
        function loadNodes() {
            const cluster = document.getElementById('nodeCluster').value;
            const nodesTable = document.getElementById('nodesTable').getElementsByTagName('tbody')[0];
            
            if (!cluster) {
                nodesTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #999;">è¯·é€‰æ‹©é›†ç¾¤æŸ¥çœ‹èŠ‚ç‚¹åˆ—è¡¨</td></tr>';
                allNodes = [];
                currentCluster = '';
                return;
            }
            
            currentCluster = cluster;
            nodesTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #999;">åŠ è½½èŠ‚ç‚¹åˆ—è¡¨...</td></tr>';
            
            fetch(`/api/${cluster}/nodes`)
                .then(response => response.json())
                .then(data => {
                    if (Array.isArray(data)) {
                        // å­˜å‚¨èŠ‚ç‚¹æ•°æ®åˆ°å…¨å±€å˜é‡
                        allNodes = data;
                        
                        if (data.length === 0) {
                            nodesTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #999;">è¯¥é›†ç¾¤ä¸‹æ²¡æœ‰èŠ‚ç‚¹</td></tr>';
                            return;
                        }
                        
                        // æ¸²æŸ“èŠ‚ç‚¹åˆ—è¡¨
                        renderNodes(data);
                    } else if (data.success === false) {
                        // æœåŠ¡å™¨è¿”å›äº†é”™è¯¯ä¿¡æ¯
                        showNodeMessage(data.message, 'error');
                        nodesTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #dc2626;">åŠ è½½èŠ‚ç‚¹åˆ—è¡¨å¤±è´¥</td></tr>';
                        allNodes = [];
                    } else {
                        showNodeMessage('åŠ è½½èŠ‚ç‚¹åˆ—è¡¨å¤±è´¥: è¿”å›æ•°æ®æ ¼å¼é”™è¯¯', 'error');
                        nodesTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #dc2626;">åŠ è½½èŠ‚ç‚¹åˆ—è¡¨å¤±è´¥</td></tr>';
                        allNodes = [];
                    }
                })
                .catch(error => {
                    showNodeMessage('åŠ è½½èŠ‚ç‚¹åˆ—è¡¨å¤±è´¥: ' + error.message, 'error');
                    const nodesTable = document.getElementById('nodesTable').getElementsByTagName('tbody')[0];
                    nodesTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #dc2626;">åŠ è½½èŠ‚ç‚¹åˆ—è¡¨å¤±è´¥</td></tr>';
                    allNodes = [];
                });
        }
        
        // æ¸²æŸ“èŠ‚ç‚¹åˆ—è¡¨
        function renderNodes(nodes) {
            const nodesTable = document.getElementById('nodesTable').getElementsByTagName('tbody')[0];
            
            let rows = '';
            nodes.forEach(node => {
                // æ ¼å¼åŒ–åˆ›å»ºæ—¶é—´
                const creationTime = new Date(node.creation_timestamp).toLocaleString('zh-CN');
                
                rows += `
                    <tr>
                        <td style="text-align: center;">${node.name}</td>
                        <td style="text-align: center;">${node.status}</td>
                        <td style="text-align: center;">${node.internal_ip}</td>
                        <td style="text-align: center;">${node.os_image}</td>
                        <td style="text-align: center;">${node.cpu_allocatable}</td>
                        <td style="text-align: center;">${node.memory_allocatable}</td>
                        <td style="text-align: center;">${creationTime}</td>
                    </tr>
                `;
            });
            nodesTable.innerHTML = rows;
        }
        
        // æœç´¢èŠ‚ç‚¹
        function searchNodes() {
            const searchTerm = document.getElementById('nodeSearch').value.trim().toLowerCase();
            
            if (!searchTerm) {
                // å¦‚æœæœç´¢è¯ä¸ºç©ºï¼Œæ˜¾ç¤ºæ‰€æœ‰èŠ‚ç‚¹
                renderNodes(allNodes);
                return;
            }
            
            // ç­›é€‰åŒ¹é…çš„èŠ‚ç‚¹
            const filteredNodes = allNodes.filter(node => {
                const nodeName = node.name.toLowerCase();
                const nodeIp = node.internal_ip.toLowerCase();
                
                // åŒ¹é…èŠ‚ç‚¹åç§°æˆ–IPåœ°å€
                return nodeName.includes(searchTerm) || nodeIp.includes(searchTerm);
            });
            
            // æ¸²æŸ“ç­›é€‰åçš„èŠ‚ç‚¹
            const nodesTable = document.getElementById('nodesTable').getElementsByTagName('tbody')[0];
            
            if (filteredNodes.length === 0) {
                nodesTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #999;">æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„èŠ‚ç‚¹</td></tr>';
                return;
            }
            
            renderNodes(filteredNodes);
        }
        
        // æ¸…ç©ºæœç´¢
        function clearNodeSearch() {
            document.getElementById('nodeSearch').value = '';
            renderNodes(allNodes);
        }
        
        // å…¨å±€å˜é‡å­˜å‚¨å‘½åç©ºé—´æ•°æ®
        let allNamespaces = [];
        let currentNamespaceCluster = '';
        
        // åŠ è½½é›†ç¾¤åˆ—è¡¨ï¼ˆç”¨äºå‘½åç©ºé—´ç®¡ç†ï¼‰
        function loadClustersForNamespaces() {
            fetch('/api/clusters')
                .then(response => response.json())
                .then(data => {
                    const clusterSelect = document.getElementById('namespaceCluster');
                    clusterSelect.innerHTML = '<option value="">è¯·é€‰æ‹©é›†ç¾¤</option>';
                    data.forEach(cluster => {
                        const option = document.createElement('option');
                        option.value = cluster.name;
                        option.textContent = cluster.display_name || cluster.name;
                        clusterSelect.appendChild(option);
                    });
                })
                .catch(error => {
                    showNamespaceMessage('åŠ è½½é›†ç¾¤å¤±è´¥: ' + error.message, 'error');
                });
        }
        
        // æ˜¾ç¤ºå‘½åç©ºé—´æ¶ˆæ¯
        function showNamespaceMessage(text, type) {
            const messageDiv = document.getElementById('namespaceMessage') || document.createElement('div');
            messageDiv.id = 'namespaceMessage';
            messageDiv.className = 'message-container';
            messageDiv.innerHTML = `<div class="message ${type}">${text}</div>`;
            
            // æ·»åŠ åˆ°containerä¸­
            const container = document.querySelector('#namespaceContent .container');
            const table = document.getElementById('namespacesTable');
            container.insertBefore(messageDiv, table);
            
            setTimeout(() => {
                messageDiv.innerHTML = '';
            }, 3000);
        }
        
        // åŠ è½½å‘½åç©ºé—´åˆ—è¡¨
        function loadNamespaces() {
            const cluster = document.getElementById('namespaceCluster').value;
            const namespacesTable = document.getElementById('namespacesTable').getElementsByTagName('tbody')[0];
            
            if (!cluster) {
                namespacesTable.innerHTML = '<tr><td colspan="3" style="text-align: center; color: #999;">è¯·é€‰æ‹©é›†ç¾¤æŸ¥çœ‹å‘½åç©ºé—´åˆ—è¡¨</td></tr>';
                allNamespaces = [];
                currentNamespaceCluster = '';
                return;
            }
            
            currentNamespaceCluster = cluster;
            namespacesTable.innerHTML = '<tr><td colspan="3" style="text-align: center; color: #999;">åŠ è½½å‘½åç©ºé—´åˆ—è¡¨...</td></tr>';
            
            fetch(`/api/${cluster}/namespaces`)
                .then(response => response.json())
                .then(data => {
                    if (Array.isArray(data)) {
                        // å­˜å‚¨å‘½åç©ºé—´æ•°æ®åˆ°å…¨å±€å˜é‡
                        allNamespaces = data;
                        
                        if (data.length === 0) {
                            namespacesTable.innerHTML = '<tr><td colspan="3" style="text-align: center; color: #999;">è¯¥é›†ç¾¤ä¸‹æ²¡æœ‰å‘½åç©ºé—´</td></tr>';
                            return;
                        }
                        
                        // æ¸²æŸ“å‘½åç©ºé—´åˆ—è¡¨
                        renderNamespaces(data);
                    } else if (data.success === false) {
                        // æœåŠ¡å™¨è¿”å›äº†é”™è¯¯ä¿¡æ¯
                        showNamespaceMessage(data.message, 'error');
                        namespacesTable.innerHTML = '<tr><td colspan="3" style="text-align: center; color: #dc2626;">åŠ è½½å‘½åç©ºé—´åˆ—è¡¨å¤±è´¥</td></tr>';
                        allNamespaces = [];
                    } else {
                        showNamespaceMessage('åŠ è½½å‘½åç©ºé—´åˆ—è¡¨å¤±è´¥: è¿”å›æ•°æ®æ ¼å¼é”™è¯¯', 'error');
                        namespacesTable.innerHTML = '<tr><td colspan="3" style="text-align: center; color: #dc2626;">åŠ è½½å‘½åç©ºé—´åˆ—è¡¨å¤±è´¥</td></tr>';
                        allNamespaces = [];
                    }
                })
                .catch(error => {
                    showNamespaceMessage('åŠ è½½å‘½åç©ºé—´åˆ—è¡¨å¤±è´¥: ' + error.message, 'error');
                    const namespacesTable = document.getElementById('namespacesTable').getElementsByTagName('tbody')[0];
                    namespacesTable.innerHTML = '<tr><td colspan="3" style="text-align: center; color: #dc2626;">åŠ è½½å‘½åç©ºé—´åˆ—è¡¨å¤±è´¥</td></tr>';
                    allNamespaces = [];
                });
        }
        
        // æ¸²æŸ“å‘½åç©ºé—´åˆ—è¡¨
        function renderNamespaces(namespaces) {
            const namespacesTable = document.getElementById('namespacesTable').getElementsByTagName('tbody')[0];
            
            let rows = '';
            namespaces.forEach(ns => {
                // æ ¼å¼åŒ–åˆ›å»ºæ—¶é—´
                const creationTime = new Date(ns.creation_time).toLocaleString('zh-CN');
                
                rows += `
                    <tr>
                        <td style="text-align: center;">${ns.name}</td>
                        <td style="text-align: center;">${creationTime}</td>
                        <td style="text-align: center;">
                            <button class="btn-edit" onclick="editNamespace('${ns.name}')">ç¼–è¾‘</button>
                            <button class="btn-delete" onclick="deleteNamespace('${ns.name}')">åˆ é™¤</button>
                        </td>
                    </tr>
                `;
            });
            namespacesTable.innerHTML = rows;
        }
        
        // æœç´¢å‘½åç©ºé—´
        function searchNamespaces() {
            const searchTerm = document.getElementById('namespaceSearch').value.trim().toLowerCase();
            
            if (!searchTerm) {
                // å¦‚æœæœç´¢è¯ä¸ºç©ºï¼Œæ˜¾ç¤ºæ‰€æœ‰å‘½åç©ºé—´
                renderNamespaces(allNamespaces);
                return;
            }
            
            // ç­›é€‰åŒ¹é…çš„å‘½åç©ºé—´
            const filteredNamespaces = allNamespaces.filter(ns => {
                const nsName = ns.name.toLowerCase();
                
                // åŒ¹é…å‘½åç©ºé—´åç§°
                return nsName.includes(searchTerm);
            });
            
            // æ¸²æŸ“ç­›é€‰åçš„å‘½åç©ºé—´
            const namespacesTable = document.getElementById('namespacesTable').getElementsByTagName('tbody')[0];
            
            if (filteredNamespaces.length === 0) {
                namespacesTable.innerHTML = '<tr><td colspan="3" style="text-align: center; color: #999;">æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å‘½åç©ºé—´</td></tr>';
                return;
            }
            
            renderNamespaces(filteredNamespaces);
        }
        
        // æ¸…ç©ºæœç´¢
        function clearNamespaceSearch() {
            document.getElementById('namespaceSearch').value = '';
            renderNamespaces(allNamespaces);
        }
        
        // ç¼–è¾‘å‘½åç©ºé—´ï¼ˆå ä½å‡½æ•°ï¼‰
        function editNamespace(namespaceName) {
            showNamespaceMessage(`ç¼–è¾‘å‘½åç©ºé—´: ${namespaceName}ï¼ˆåŠŸèƒ½å¼€å‘ä¸­ï¼‰`, 'info');
        }
        
        // åˆ é™¤å‘½åç©ºé—´ï¼ˆå ä½å‡½æ•°ï¼‰
        function deleteNamespace(namespaceName) {
            if (confirm(`ç¡®å®šè¦åˆ é™¤å‘½åç©ºé—´ ${namespaceName} å—ï¼Ÿ`)) {
                showNamespaceMessage(`åˆ é™¤å‘½åç©ºé—´: ${namespaceName}ï¼ˆåŠŸèƒ½å¼€å‘ä¸­ï¼‰`, 'info');
            }
        }
        
        // æ‰“å¼€æ–°å»ºå‘½åç©ºé—´æ¨¡æ€æ¡†ï¼ˆå ä½å‡½æ•°ï¼‰
        function openAddNamespaceModal() {
            showNamespaceMessage('æ–°å»ºå‘½åç©ºé—´ï¼ˆåŠŸèƒ½å¼€å‘ä¸­ï¼‰', 'info');
        }
        
        // å‘½åç©ºé—´ç®¡ç†å†…å®¹åŠ è½½
        function loadNamespaceContent() {
            document.getElementById('namespaceContent').style.display = 'block';
            // åŠ è½½é›†ç¾¤åˆ—è¡¨
            loadClustersForNamespaces();
            // åˆå§‹åŒ–è¡¨æ ¼
            const namespacesTable = document.getElementById('namespacesTable').getElementsByTagName('tbody')[0];
            namespacesTable.innerHTML = '<tr><td colspan="4" style="text-align: center; color: #999;">è¯·é€‰æ‹©é›†ç¾¤æŸ¥çœ‹å‘½åç©ºé—´åˆ—è¡¨</td></tr>';
        }
        
        // å…¨å±€å˜é‡å­˜å‚¨å·¥ä½œè´Ÿè½½æ•°æ®
        let allWorkloads = [];
        let currentWorkloadCluster = '';
        let currentWorkloadNamespace = '';
        let currentWorkloadType = '';
        
        // åŠ è½½å‘½åç©ºé—´åˆ—è¡¨ï¼ˆç”¨äºå·¥ä½œè´Ÿè½½ç®¡ç†ï¼‰
        function loadWorkloadNamespaces() {
            const cluster = document.getElementById('workloadCluster').value;
            const namespaceSelect = document.getElementById('workloadNamespace');
            
            if (!cluster) {
                namespaceSelect.innerHTML = '<option value="">è¯·é€‰æ‹©å‘½åç©ºé—´</option>';
                return;
            }
            
            // æ¸…ç©ºå‘½åç©ºé—´å’Œå·¥ä½œè´Ÿè½½è¡¨æ ¼
            namespaceSelect.innerHTML = '<option value="">åŠ è½½å‘½åç©ºé—´...</option>';
            const workloadsTable = document.getElementById('workloadsTable').getElementsByTagName('tbody')[0];
            workloadsTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #999;">è¯·é€‰æ‹©å‘½åç©ºé—´æŸ¥çœ‹å·¥ä½œè´Ÿè½½</td></tr>';
            
            // è°ƒç”¨APIè·å–å‘½åç©ºé—´åˆ—è¡¨
            fetch(`/api/${cluster}/namespaces`)
                .then(response => response.json())
                .then(data => {
                    if (Array.isArray(data)) {
                        namespaceSelect.innerHTML = '<option value="">è¯·é€‰æ‹©å‘½åç©ºé—´</option>';
                        data.forEach(ns => {
                            const option = document.createElement('option');
                            option.value = ns.name;
                            option.textContent = ns.name;
                            namespaceSelect.appendChild(option);
                        });
                    } else if (data.success === false) {
                        namespaceSelect.innerHTML = '<option value="">åŠ è½½å‘½åç©ºé—´å¤±è´¥</option>';
                        showMessage(data.message, 'error');
                    } else {
                        namespaceSelect.innerHTML = '<option value="">åŠ è½½å‘½åç©ºé—´å¤±è´¥</option>';
                        showMessage('åŠ è½½å‘½åç©ºé—´å¤±è´¥: è¿”å›æ•°æ®æ ¼å¼é”™è¯¯', 'error');
                    }
                })
                .catch(error => {
                    namespaceSelect.innerHTML = '<option value="">åŠ è½½å‘½åç©ºé—´å¤±è´¥</option>';
                    showMessage('åŠ è½½å‘½åç©ºé—´å¤±è´¥: ' + error.message, 'error');
                });
        }
        
        // æ˜¾ç¤ºå·¥ä½œè´Ÿè½½æ¶ˆæ¯
        function showWorkloadMessage(text, type) {
            const messageDiv = document.getElementById('workloadMessage') || document.createElement('div');
            messageDiv.id = 'workloadMessage';
            messageDiv.className = 'message-container';
            messageDiv.innerHTML = `<div class="message ${type}">${text}</div>`;
            
            // æ·»åŠ åˆ°containerä¸­
            const container = document.querySelector('#workloadContent .container');
            const table = document.getElementById('workloadsTable');
            container.insertBefore(messageDiv, table);
            
            setTimeout(() => {
                messageDiv.innerHTML = '';
            }, 3000);
        }
        
        // åŠ è½½å·¥ä½œè´Ÿè½½åˆ—è¡¨
        function loadWorkloadsList() {
            const cluster = document.getElementById('workloadCluster').value;
            const namespace = document.getElementById('workloadNamespace').value;
            const workloadType = document.getElementById('workloadTypeFilter').value;
            const workloadsTable = document.getElementById('workloadsTable').getElementsByTagName('tbody')[0];
            
            if (!cluster || !namespace) {
                workloadsTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #999;">è¯·é€‰æ‹©é›†ç¾¤å’Œå‘½åç©ºé—´æŸ¥çœ‹å·¥ä½œè´Ÿè½½</td></tr>';
                allWorkloads = [];
                currentWorkloadCluster = '';
                currentWorkloadNamespace = '';
                currentWorkloadType = '';
                return;
            }
            
            // æ›´æ–°å½“å‰é€‰æ‹©
            currentWorkloadCluster = cluster;
            currentWorkloadNamespace = namespace;
            currentWorkloadType = workloadType;
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            workloadsTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #999;">åŠ è½½å·¥ä½œè´Ÿè½½åˆ—è¡¨...</td></tr>';
            
            // æ„å»ºAPIè¯·æ±‚URL
            let url = `/api/${cluster}/${namespace}/workloads`;
            if (workloadType) {
                url += `?type=${workloadType}`;
            }
            
            // è°ƒç”¨APIè·å–å·¥ä½œè´Ÿè½½åˆ—è¡¨
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    if (Array.isArray(data)) {
                        // å­˜å‚¨å·¥ä½œè´Ÿè½½æ•°æ®åˆ°å…¨å±€å˜é‡
                        allWorkloads = data;
                        
                        if (data.length === 0) {
                            workloadsTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #999;">è¯¥å‘½åç©ºé—´ä¸‹æ²¡æœ‰å·¥ä½œè´Ÿè½½</td></tr>';
                            return;
                        }
                        
                        // æ¸²æŸ“å·¥ä½œè´Ÿè½½åˆ—è¡¨
                        renderWorkloads(data);
                    } else if (data.success === false) {
                        // æœåŠ¡å™¨è¿”å›äº†é”™è¯¯ä¿¡æ¯
                        showWorkloadMessage(data.message, 'error');
                        workloadsTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #dc2626;">åŠ è½½å·¥ä½œè´Ÿè½½åˆ—è¡¨å¤±è´¥</td></tr>';
                        allWorkloads = [];
                    } else {
                        showWorkloadMessage('åŠ è½½å·¥ä½œè´Ÿè½½åˆ—è¡¨å¤±è´¥: è¿”å›æ•°æ®æ ¼å¼é”™è¯¯', 'error');
                        workloadsTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #dc2626;">åŠ è½½å·¥ä½œè´Ÿè½½åˆ—è¡¨å¤±è´¥</td></tr>';
                        allWorkloads = [];
                    }
                })
                .catch(error => {
                    showWorkloadMessage('åŠ è½½å·¥ä½œè´Ÿè½½åˆ—è¡¨å¤±è´¥: ' + error.message, 'error');
                    const workloadsTable = document.getElementById('workloadsTable').getElementsByTagName('tbody')[0];
                    workloadsTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #dc2626;">åŠ è½½å·¥ä½œè´Ÿè½½åˆ—è¡¨å¤±è´¥</td></tr>';
                    allWorkloads = [];
                });
        }
        
        // æ¸²æŸ“å·¥ä½œè´Ÿè½½åˆ—è¡¨
        function renderWorkloads(workloads) {
            const workloadsTable = document.getElementById('workloadsTable').getElementsByTagName('tbody')[0];
            
            const cluster = document.getElementById('workloadCluster').value;
            const namespace = document.getElementById('workloadNamespace').value;
            let rows = '';
            workloads.forEach(workload => {
                // æ ¼å¼åŒ–åˆ›å»ºæ—¶é—´
                const creationTime = new Date(workload.creation_time).toLocaleString('zh-CN');
                
                rows += `
                    <tr>
                        <td style="text-align: center;">${workload.name}</td>
                        <td style="text-align: center;">${workload.type}</td>
                        <td style="text-align: center;">${workload.namespace}</td>
                        <td style="text-align: center;">${workload.ready_replicas}/${workload.desired_replicas}</td>
                        <td style="text-align: center;">${workload.status}</td>
                        <td style="text-align: center;">${creationTime}</td>
                        <td style="text-align: center;">
                            <button class="btn-edit" onclick="viewWorkloadYaml('${cluster}', '${namespace}', '${workload.name}', '${workload.type}')">æŸ¥çœ‹YAML</button>
                            <button class="btn-delete" onclick="removeWorkload('${workload.name}', '${workload.type}')">åˆ é™¤</button>
                        </td>
                    </tr>
                `;
            });
            workloadsTable.innerHTML = rows;
        }
        
        // æŸ¥çœ‹å·¥ä½œè´Ÿè½½YAML
        function viewWorkloadYaml(cluster, namespace, workloadName, workloadType) {
            // æ˜¾ç¤ºæ¨¡æ€æ¡†
            document.getElementById('workloadYamlTitle').textContent = `${workloadType} ${workloadName} YAMLé…ç½®`;
            document.getElementById('workloadYamlContent').textContent = 'åŠ è½½ä¸­...';
            document.getElementById('workloadYamlModal').style.display = 'block';
            
            // è·å–YAMLå†…å®¹
            fetch(`/api/${cluster}/${namespace}/${workloadType}/${workloadName}/yaml`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('è·å–YAMLå¤±è´¥');
                    }
                    return response.text();
                })
                .then(yamlContent => {
                    document.getElementById('workloadYamlContent').textContent = yamlContent;
                })
                .catch(error => {
                    showWorkloadMessage(`è·å–${workloadType} ${workloadName}çš„YAMLå¤±è´¥: ${error.message}`, 'error');
                    document.getElementById('workloadYamlContent').textContent = `è·å–YAMLå¤±è´¥: ${error.message}`;
                });
        }
        
        // å…³é—­å·¥ä½œè´Ÿè½½YAMLæ¨¡æ€æ¡†
        function closeWorkloadYamlModal() {
            document.getElementById('workloadYamlModal').style.display = 'none';
        }
        
        // åˆ é™¤å·¥ä½œè´Ÿè½½ï¼ˆå ä½å‡½æ•°ï¼‰
        function removeWorkload(workloadName, workloadType) {
            if (confirm(`ç¡®å®šè¦åˆ é™¤å·¥ä½œè´Ÿè½½ ${workloadName} å—ï¼Ÿ`)) {
                showWorkloadMessage(`åˆ é™¤å·¥ä½œè´Ÿè½½: ${workloadName}ï¼ˆåŠŸèƒ½å¼€å‘ä¸­ï¼‰`, 'info');
            }
        }
        
        // æœç´¢å·¥ä½œè´Ÿè½½
        function searchWorkloads() {
            const searchTerm = document.getElementById('workloadSearch').value.trim().toLowerCase();
            
            if (!searchTerm) {
                // å¦‚æœæœç´¢è¯ä¸ºç©ºï¼Œæ˜¾ç¤ºæ‰€æœ‰å·¥ä½œè´Ÿè½½
                renderWorkloads(allWorkloads);
                return;
            }
            
            // ç­›é€‰åŒ¹é…çš„å·¥ä½œè´Ÿè½½
            const filteredWorkloads = allWorkloads.filter(workload => {
                const workloadName = workload.name.toLowerCase();
                return workloadName.includes(searchTerm);
            });
            
            // æ¸²æŸ“ç­›é€‰åçš„å·¥ä½œè´Ÿè½½
            const workloadsTable = document.getElementById('workloadsTable').getElementsByTagName('tbody')[0];
            
            if (filteredWorkloads.length === 0) {
                workloadsTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #999;">æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å·¥ä½œè´Ÿè½½</td></tr>';
                return;
            }
            
            renderWorkloads(filteredWorkloads);
        }
        
        // æ¸…ç©ºæœç´¢
        function clearWorkloadSearch() {
            document.getElementById('workloadSearch').value = '';
            // æ˜¾ç¤ºæ‰€æœ‰å·¥ä½œè´Ÿè½½
            renderWorkloads(allWorkloads);
        }
        
        // å·¥ä½œè´Ÿè½½ç®¡ç†å†…å®¹åŠ è½½
        function loadWorkloadContent() {
            document.getElementById('workloadContent').style.display = 'block';
            // åŠ è½½é›†ç¾¤åˆ—è¡¨
            loadClustersForLoad('workloadCluster');
            // åˆå§‹åŒ–è¡¨æ ¼
            const workloadsTable = document.getElementById('workloadsTable').getElementsByTagName('tbody')[0];
            workloadsTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #999;">è¯·é€‰æ‹©é›†ç¾¤å’Œå‘½åç©ºé—´æŸ¥çœ‹å·¥ä½œè´Ÿè½½</td></tr>';
            // æ¸…ç©ºå‘½åç©ºé—´é€‰æ‹©
            const namespaceSelect = document.getElementById('workloadNamespace');
            namespaceSelect.innerHTML = '<option value="">è¯·é€‰æ‹©é›†ç¾¤</option>';
        }
        
        // Podç®¡ç†å†…å®¹åŠ è½½
        function loadPodContent() {
            document.getElementById('podContent').style.display = 'block';
            // åŠ è½½é›†ç¾¤åˆ—è¡¨
            loadClustersForLoad('podCluster');
        }
        
        // å…¨å±€å˜é‡ï¼šä¿å­˜æ‰€æœ‰Pod
        let allPods = [];
        
        // åŠ è½½Podç®¡ç†çš„å‘½åç©ºé—´
        function loadPodNamespaces() {
            const clusterSelect = document.getElementById('podCluster');
            const namespaceSelect = document.getElementById('podNamespace');
            const workloadSelect = document.getElementById('podWorkload');
            const cluster = clusterSelect.value;
            
            // æ¸…ç©ºå‘½åç©ºé—´é€‰æ‹©
            namespaceSelect.innerHTML = '<option value="">è¯·é€‰æ‹©å‘½åç©ºé—´</option>';
            // æ¸…ç©ºå·¥ä½œè´Ÿè½½é€‰æ‹©
            workloadSelect.innerHTML = '<option value="">å…¨éƒ¨å·¥ä½œè´Ÿè½½</option>';
            
            // æ¸…ç©ºPodåˆ—è¡¨
            const podsTable = document.getElementById('podsTable').getElementsByTagName('tbody')[0];
            podsTable.innerHTML = '<tr><td colspan="9" style="text-align: center; color: #999;">è¯·é€‰æ‹©å‘½åç©ºé—´</td></tr>';
            
            if (!cluster) {
                return;
            }
            
            fetch(`/api/${cluster}/namespaces`)
                .then(response => response.json())
                .then(data => {
                    if (Array.isArray(data)) {
                        data.forEach(ns => {
                            const option = document.createElement('option');
                            option.value = ns.name;
                            option.textContent = ns.name;
                            namespaceSelect.appendChild(option);
                        });
                    }
                })
                .catch(error => {
                    console.error('åŠ è½½å‘½åç©ºé—´å¤±è´¥:', error);
                });
        }
        
        // åŠ è½½Podç®¡ç†çš„å·¥ä½œè´Ÿè½½åˆ—è¡¨
        function loadPodWorkloads() {
            const clusterSelect = document.getElementById('podCluster');
            const namespaceSelect = document.getElementById('podNamespace');
            const workloadSelect = document.getElementById('podWorkload');
            const cluster = clusterSelect.value;
            const namespace = namespaceSelect.value;
            
            // æ¸…ç©ºå·¥ä½œè´Ÿè½½é€‰æ‹©
            workloadSelect.innerHTML = '<option value="">å…¨éƒ¨å·¥ä½œè´Ÿè½½</option>';
            
            // æ¸…ç©ºPodåˆ—è¡¨
            const podsTable = document.getElementById('podsTable').getElementsByTagName('tbody')[0];
            podsTable.innerHTML = '<tr><td colspan="9" style="text-align: center; color: #999;">è¯·é€‰æ‹©å·¥ä½œè´Ÿè½½</td></tr>';
            
            if (!cluster || !namespace) {
                return;
            }
            
            fetch(`/api/${cluster}/${namespace}/workloads`)
                .then(response => response.json())
                .then(data => {
                    if (Array.isArray(data)) {
                        data.forEach(workload => {
                            const option = document.createElement('option');
                            option.value = `${workload.type}:${workload.name}`;
                            option.textContent = `${workload.type}: ${workload.name}`;
                            workloadSelect.appendChild(option);
                        });
                    }
                })
                .catch(error => {
                    console.error('åŠ è½½å·¥ä½œè´Ÿè½½å¤±è´¥:', error);
                });
        }
        
        // æ¸²æŸ“Podåˆ—è¡¨
        function renderPods(pods, cluster, namespace) {
            const podsTable = document.getElementById('podsTable').getElementsByTagName('tbody')[0];
            
            if (pods.length === 0) {
                podsTable.innerHTML = '<tr><td colspan="8" style="text-align: center; color: #999;">è¯¥å‘½åç©ºé—´ä¸‹æ²¡æœ‰Pod</td></tr>';
                return;
            }
            
            let rows = '';
            pods.forEach(pod => {
                // åˆ¤æ–­æ˜¯å¦å·²è¸¢å‡ºè´Ÿè½½ï¼šloadæ ‡ç­¾å€¼ä¸ºdoneè¡¨ç¤ºå·²è¸¢å‡º
                const hasRemoveload = pod.has_removeload || false;
                const hasRemoveloadText = hasRemoveload ? '<span class="has-removeload">æ˜¯</span>' : '<span class="no-removeload">å¦</span>';
                
                // æ“ä½œæŒ‰é’®ï¼šæ ¹æ®æ˜¯å¦å·²è¸¢å‡ºè´Ÿè½½æ˜¾ç¤ºä¸åŒæŒ‰é’®
                const actionButtons = hasRemoveload ? 
                    `<button class="restore" onclick="restoreTraffic('${cluster}', '${namespace}', '${pod.name}', 'loadPodsList')">æ¢å¤æµé‡</button>` : 
                    `<button class="remove" onclick="removeLoad('${cluster}', '${namespace}', '${pod.name}', 'loadPodsList')">è¸¢å‡ºè´Ÿè½½</button>`;
                
                rows += `
                    <tr>
                        <td>${pod.name}</td>
                        <td><span class="status ${pod.status}">${pod.status}</span></td>
                        <td>${pod.node_ip || '-'}</td>
                        <td>${pod.pod_ip || '-'}</td>
                        <td>${pod.restart_count || 0}</td>
                        <td>${hasRemoveloadText}</td>
                        <td>${pod.created_time || '-'}</td>
                        <td class="action-buttons">${actionButtons}</td>
                    </tr>
                `;
            });
            
            podsTable.innerHTML = rows;
        }
        
        // åŠ è½½Podåˆ—è¡¨
        function loadPodsList() {
            const clusterSelect = document.getElementById('podCluster');
            const namespaceSelect = document.getElementById('podNamespace');
            const workloadSelect = document.getElementById('podWorkload');
            const cluster = clusterSelect.value;
            const namespace = namespaceSelect.value;
            const workload = workloadSelect.value;
            const podsTable = document.getElementById('podsTable').getElementsByTagName('tbody')[0];
            
            if (!cluster || !namespace) {
                podsTable.innerHTML = '<tr><td colspan="8" style="text-align: center; color: #999;">è¯·é€‰æ‹©é›†ç¾¤å’Œå‘½åç©ºé—´</td></tr>';
                allPods = [];
                return;
            }
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            podsTable.innerHTML = '<tr><td colspan="8" style="text-align: center; color: #999;">åŠ è½½ä¸­...</td></tr>';
            
            let apiUrl;
            if (workload && workload !== '') {
                // å¦‚æœé€‰æ‹©äº†å·¥ä½œè´Ÿè½½ï¼Œè·å–è¯¥å·¥ä½œè´Ÿè½½çš„Pod
                const [workloadType, workloadName] = workload.split(':');
                apiUrl = `/api/${cluster}/${namespace}/${workloadType}/${workloadName}/pods`;
            } else {
                // è·å–æ‰€æœ‰Pod
                apiUrl = `/api/${cluster}/${namespace}/pods`;
            }
            
            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    if (Array.isArray(data)) {
                        // ä¿å­˜æ‰€æœ‰Podåˆ°å…¨å±€å˜é‡
                        allPods = data;
                        
                        // æ¸²æŸ“Podåˆ—è¡¨
                        renderPods(data, cluster, namespace);
                    } else if (data.success === false) {
                        podsTable.innerHTML = `<tr><td colspan="8" style="text-align: center; color: #ff6b6b;">${data.message}</td></tr>`;
                        allPods = [];
                    } else {
                        podsTable.innerHTML = '<tr><td colspan="8" style="text-align: center; color: #ff6b6b;">åŠ è½½Podåˆ—è¡¨å¤±è´¥</td></tr>';
                        allPods = [];
                    }
                })
                .catch(error => {
                    console.error('åŠ è½½Podåˆ—è¡¨å¤±è´¥:', error);
                    podsTable.innerHTML = `<tr><td colspan="8" style="text-align: center; color: #ff6b6b;">åŠ è½½å¤±è´¥: ${error.message}</td></tr>`;
                    allPods = [];
                });
        }
        
        // æœç´¢Pod
        function searchPods() {
            const searchTerm = document.getElementById('podSearch').value.trim().toLowerCase();
            const cluster = document.getElementById('podCluster').value;
            const namespace = document.getElementById('podNamespace').value;
            const podsTable = document.getElementById('podsTable').getElementsByTagName('tbody')[0];
            
            if (!cluster || !namespace) {
                podsTable.innerHTML = '<tr><td colspan="8" style="text-align: center; color: #999;">è¯·é€‰æ‹©é›†ç¾¤å’Œå‘½åç©ºé—´</td></tr>';
                return;
            }
            
            if (!searchTerm) {
                // å¦‚æœæœç´¢è¯ä¸ºç©ºï¼Œæ˜¾ç¤ºæ‰€æœ‰Pod
                renderPods(allPods, cluster, namespace);
                return;
            }
            
            // ç­›é€‰åŒ¹é…çš„Pod
            const filteredPods = allPods.filter(pod => {
                const podName = pod.name.toLowerCase();
                return podName.includes(searchTerm);
            });
            
            // æ¸²æŸ“ç­›é€‰åçš„Pod
            if (filteredPods.length === 0) {
                podsTable.innerHTML = '<tr><td colspan="8" style="text-align: center; color: #999;">æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„Pod</td></tr>';
                return;
            }
            
            renderPods(filteredPods, cluster, namespace);
        }
        
        // æ¸…ç©ºPodæœç´¢
        function clearPodSearch() {
            document.getElementById('podSearch').value = '';
            const cluster = document.getElementById('podCluster').value;
            const namespace = document.getElementById('podNamespace').value;
            renderPods(allPods, cluster, namespace);
        }
        
        // æ˜¾ç¤ºæœåŠ¡ä¸è·¯ç”±æ¶ˆæ¯
        function showServiceMessage(text, type) {
            const messageDiv = document.getElementById('serviceMessage') || document.createElement('div');
            messageDiv.id = 'serviceMessage';
            messageDiv.className = 'message-container';
            messageDiv.innerHTML = `<div class="message ${type}">${text}</div>`;
            
            // æ·»åŠ åˆ°containerä¸­
            const container = document.querySelector('#serviceContent .container');
            const table = document.getElementById('servicesTable');
            container.insertBefore(messageDiv, table);
            
            setTimeout(() => {
                messageDiv.innerHTML = '';
            }, 3000);
        }
        
        // æ¸²æŸ“æœåŠ¡ä¸è·¯ç”±åˆ—è¡¨
        function renderServices(services) {
            const servicesTable = document.getElementById('servicesTable').getElementsByTagName('tbody')[0];
            const cluster = document.getElementById('serviceCluster').value;
            const namespace = document.getElementById('serviceNamespace').value;
            
            if (services.length === 0) {
                servicesTable.innerHTML = '<tr><td colspan="8" style="text-align: center; color: #999;">è¯¥å‘½åç©ºé—´ä¸‹æ²¡æœ‰æœåŠ¡ä¸è·¯ç”±</td></tr>';
                return;
            }
            
            let rows = '';
            services.forEach(service => {
                // æ ¼å¼åŒ–åˆ›å»ºæ—¶é—´
                const creationTime = new Date(service.creation_time).toLocaleString('zh-CN');
                
                rows += `
                    <tr>
                        <td style="text-align: center;">${service.name}</td>
                        <td style="text-align: center;">${service.type}</td>
                        <td style="text-align: center;">${service.namespace}</td>
                        <td style="text-align: center;">${service.ip || '-'}</td>
                        <td style="text-align: center;">${service.ports || '-'}</td>
                        <td style="text-align: center;">${service.status}</td>
                        <td style="text-align: center;">${creationTime}</td>
                        <td style="text-align: center;">
                            <button class="btn-edit" onclick="viewServiceDetails('${cluster}', '${namespace}', '${service.name}', '${service.type}')">æŸ¥çœ‹è¯¦æƒ…</button>
                            <button class="btn-delete" onclick="deleteService('${service.name}', '${service.type}')">åˆ é™¤</button>
                        </td>
                    </tr>
                `;
            });
            servicesTable.innerHTML = rows;
        }
        
        // åŠ è½½æœåŠ¡ä¸è·¯ç”±çš„å‘½åç©ºé—´
        function loadServiceNamespaces() {
            const clusterSelect = document.getElementById('serviceCluster');
            const namespaceSelect = document.getElementById('serviceNamespace');
            const cluster = clusterSelect.value;
            
            // æ¸…ç©ºå‘½åç©ºé—´é€‰æ‹©
            namespaceSelect.innerHTML = '<option value="">è¯·é€‰æ‹©å‘½åç©ºé—´</option>';
            
            // æ¸…ç©ºæœåŠ¡åˆ—è¡¨
            const servicesTable = document.getElementById('servicesTable').getElementsByTagName('tbody')[0];
            servicesTable.innerHTML = '<tr><td colspan="8" style="text-align: center; color: #999;">è¯·é€‰æ‹©å‘½åç©ºé—´</td></tr>';
            
            if (!cluster) {
                return;
            }
            
            fetch(`/api/${cluster}/namespaces`)
                .then(response => response.json())
                .then(data => {
                    if (Array.isArray(data)) {
                        data.forEach(ns => {
                            const option = document.createElement('option');
                            option.value = ns.name;
                            option.textContent = ns.name;
                            namespaceSelect.appendChild(option);
                        });
                    }
                })
                .catch(error => {
                    console.error('åŠ è½½å‘½åç©ºé—´å¤±è´¥:', error);
                    showServiceMessage('åŠ è½½å‘½åç©ºé—´å¤±è´¥: ' + error.message, 'error');
                });
        }
        
        // åŠ è½½æœåŠ¡ä¸è·¯ç”±åˆ—è¡¨
        function loadServicesList() {
            const cluster = document.getElementById('serviceCluster').value;
            const namespace = document.getElementById('serviceNamespace').value;
            const serviceType = document.getElementById('serviceTypeFilter').value;
            const servicesTable = document.getElementById('servicesTable').getElementsByTagName('tbody')[0];
            
            if (!cluster || !namespace) {
                servicesTable.innerHTML = '<tr><td colspan="8" style="text-align: center; color: #999;">è¯·é€‰æ‹©é›†ç¾¤å’Œå‘½åç©ºé—´</td></tr>';
                return;
            }
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            servicesTable.innerHTML = '<tr><td colspan="8" style="text-align: center; color: #999;">åŠ è½½ä¸­...</td></tr>';
            
            let url = `/api/${cluster}/${namespace}/services`;
            if (serviceType) {
                url += `?type=${serviceType}`;
            }
            
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    if (Array.isArray(data)) {
                        // æ¸²æŸ“æœåŠ¡ä¸è·¯ç”±åˆ—è¡¨
                        renderServices(data);
                    } else if (data.success === false) {
                        // æœåŠ¡å™¨è¿”å›äº†é”™è¯¯ä¿¡æ¯
                        showServiceMessage(data.message, 'error');
                        servicesTable.innerHTML = '<tr><td colspan="8" style="text-align: center; color: #dc2626;">åŠ è½½æœåŠ¡ä¸è·¯ç”±åˆ—è¡¨å¤±è´¥</td></tr>';
                    } else {
                        showServiceMessage('åŠ è½½æœåŠ¡ä¸è·¯ç”±åˆ—è¡¨å¤±è´¥: è¿”å›æ•°æ®æ ¼å¼é”™è¯¯', 'error');
                        servicesTable.innerHTML = '<tr><td colspan="8" style="text-align: center; color: #dc2626;">åŠ è½½æœåŠ¡ä¸è·¯ç”±åˆ—è¡¨å¤±è´¥</td></tr>';
                    }
                })
                .catch(error => {
                    console.error('åŠ è½½æœåŠ¡ä¸è·¯ç”±åˆ—è¡¨å¤±è´¥:', error);
                    showServiceMessage('åŠ è½½æœåŠ¡ä¸è·¯ç”±åˆ—è¡¨å¤±è´¥: ' + error.message, 'error');
                    servicesTable.innerHTML = '<tr><td colspan="8" style="text-align: center; color: #dc2626;">åŠ è½½æœåŠ¡ä¸è·¯ç”±åˆ—è¡¨å¤±è´¥</td></tr>';
                });
        }
        
        // æŸ¥çœ‹æœåŠ¡è¯¦æƒ…
        function viewServiceDetails(cluster, namespace, serviceName, serviceType) {
            // æ˜¾ç¤ºæ¨¡æ€æ¡†
            document.getElementById('serviceYamlTitle').textContent = `${serviceType} ${serviceName} YAMLé…ç½®`;
            document.getElementById('serviceYamlContent').textContent = 'åŠ è½½ä¸­...';
            document.getElementById('serviceYamlModal').style.display = 'block';
            
            // è·å–YAMLå†…å®¹
            fetch(`/api/${cluster}/${namespace}/services/${serviceType}/${serviceName}/yaml`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('è·å–YAMLå¤±è´¥');
                    }
                    return response.text();
                })
                .then(yamlContent => {
                    document.getElementById('serviceYamlContent').textContent = yamlContent;
                })
                .catch(error => {
                    showServiceMessage(`è·å–${serviceType} ${serviceName}çš„YAMLå¤±è´¥: ${error.message}`, 'error');
                    document.getElementById('serviceYamlContent').textContent = `è·å–YAMLå¤±è´¥: ${error.message}`;
                });
        }
        
        // å…³é—­æœåŠ¡YAMLæ¨¡æ€æ¡†
        function closeServiceYamlModal() {
            document.getElementById('serviceYamlModal').style.display = 'none';
        }
        
        // åˆ é™¤æœåŠ¡ï¼ˆå ä½å‡½æ•°ï¼‰
        function deleteService(serviceName, serviceType) {
            if (confirm(`ç¡®å®šè¦åˆ é™¤${serviceType} ${serviceName}å—ï¼Ÿ`)) {
                showServiceMessage(`åˆ é™¤${serviceType} ${serviceName}ï¼ˆåŠŸèƒ½å¼€å‘ä¸­ï¼‰`, 'info');
            }
        }
        
        // æœåŠ¡ä¸è·¯ç”±ç®¡ç†å†…å®¹åŠ è½½
        function loadServiceContent() {
            document.getElementById('serviceContent').style.display = 'block';
            // åŠ è½½é›†ç¾¤åˆ—è¡¨
            loadClustersForLoad('serviceCluster');
            
            // åˆå§‹åŒ–è¡¨æ ¼
            const servicesTable = document.getElementById('servicesTable').getElementsByTagName('tbody')[0];
            servicesTable.innerHTML = '<tr><td colspan="8" style="text-align: center; color: #999;">è¯·é€‰æ‹©é›†ç¾¤å’Œå‘½åç©ºé—´</td></tr>';
            
            // æ¸…ç©ºå‘½åç©ºé—´é€‰æ‹©
            const namespaceSelect = document.getElementById('serviceNamespace');
            namespaceSelect.innerHTML = '<option value="">è¯·é€‰æ‹©å‘½åç©ºé—´</option>';
        }
        
        // é…ç½®ç®¡ç†å†…å®¹åŠ è½½
        function loadConfigContent() {
            document.getElementById('configContent').style.display = 'block';
            // åŠ è½½é›†ç¾¤åˆ—è¡¨
            loadClustersForLoad('configCluster');
        }
        
        // åŠ è½½é…ç½®ç®¡ç†çš„å‘½åç©ºé—´
        function loadConfigNamespaces() {
            const clusterSelect = document.getElementById('configCluster');
            const namespaceSelect = document.getElementById('configNamespace');
            const cluster = clusterSelect.value;
            
            // æ¸…ç©ºå‘½åç©ºé—´é€‰æ‹©
            namespaceSelect.innerHTML = '<option value="">è¯·é€‰æ‹©å‘½åç©ºé—´</option>';
            
            // æ¸…ç©ºé…ç½®åˆ—è¡¨
            const configsTable = document.getElementById('configsTable').getElementsByTagName('tbody')[0];
            configsTable.innerHTML = '<tr><td colspan="6" style="text-align: center; color: #999;">è¯·é€‰æ‹©å‘½åç©ºé—´</td></tr>';
            
            if (!cluster) {
                return;
            }
            
            fetch(`/api/${cluster}/namespaces`)
                .then(response => response.json())
                .then(data => {
                    if (Array.isArray(data)) {
                        data.forEach(ns => {
                            const option = document.createElement('option');
                            option.value = ns.name;
                            option.textContent = ns.name;
                            namespaceSelect.appendChild(option);
                        });
                    }
                })
                .catch(error => {
                    console.error('è·å–å‘½åç©ºé—´åˆ—è¡¨å¤±è´¥:', error);
                    namespaceSelect.innerHTML = '<option value="">è·å–å‘½åç©ºé—´å¤±è´¥</option>';
                });
        }
        
        // åŠ è½½é…ç½®èµ„æºåˆ—è¡¨
        function loadConfigsList() {
            const cluster = document.getElementById('configCluster').value;
            const namespace = document.getElementById('configNamespace').value;
            const configType = document.getElementById('configTypeFilter').value;
            const configsTable = document.getElementById('configsTable').getElementsByTagName('tbody')[0];
            
            if (!cluster || !namespace) {
                configsTable.innerHTML = '<tr><td colspan="6" style="text-align: center; color: #999;">è¯·é€‰æ‹©é›†ç¾¤å’Œå‘½åç©ºé—´</td></tr>';
                return;
            }
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            configsTable.innerHTML = '<tr><td colspan="6" style="text-align: center; color: #999;">åŠ è½½ä¸­...</td></tr>';
            
            // æ„å»ºAPI URL
            let apiUrl = `/api/${cluster}/${namespace}/configs`;
            if (configType) {
                apiUrl += `?type=${configType}`;
            }
            
            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    if (Array.isArray(data)) {
                        renderConfigs(data);
                    } else if (data.success === false) {
                        configsTable.innerHTML = `<tr><td colspan="6" style="text-align: center; color: #dc2626;">${data.message}</td></tr>`;
                    }
                })
                .catch(error => {
                    console.error('åŠ è½½é…ç½®èµ„æºåˆ—è¡¨å¤±è´¥:', error);
                    configsTable.innerHTML = '<tr><td colspan="6" style="text-align: center; color: #dc2626;">åŠ è½½é…ç½®èµ„æºå¤±è´¥</td></tr>';
                });
        }
        
        // æ¸²æŸ“é…ç½®èµ„æºåˆ—è¡¨
        function renderConfigs(configs) {
            const configsTable = document.getElementById('configsTable').getElementsByTagName('tbody')[0];
            const cluster = document.getElementById('configCluster').value;
            const namespace = document.getElementById('configNamespace').value;
            
            if (configs.length === 0) {
                configsTable.innerHTML = '<tr><td colspan="6" style="text-align: center; color: #999;">è¯¥å‘½åç©ºé—´ä¸‹æ²¡æœ‰é…ç½®èµ„æº</td></tr>';
                return;
            }
            
            let rows = '';
            configs.forEach(config => {
                // æ ¼å¼åŒ–åˆ›å»ºæ—¶é—´
                const creationTime = new Date(config.creation_time).toLocaleString('zh-CN');
                
                rows += `
                    <tr>
                        <td>${config.name}</td>
                        <td>${config.type}</td>
                        <td>${config.namespace}</td>
                        <td>${config.data_count}</td>
                        <td>${creationTime}</td>
                        <td>
                            <button class="btn-secondary" onclick="viewConfigYaml('${cluster}', '${namespace}', '${config.name}', '${config.type}')">æŸ¥çœ‹YAML</button>
                        </td>
                    </tr>
                `;
            });
            
            configsTable.innerHTML = rows;
        }
        
        // æŸ¥çœ‹é…ç½®èµ„æºçš„YAML
        function viewConfigYaml(cluster, namespace, name, configType) {
            // æ˜¾ç¤ºæ¨¡æ€æ¡†
            document.getElementById('configYamlTitle').textContent = `${configType} ${name} YAMLé…ç½®`;
            document.getElementById('configYamlContent').textContent = 'åŠ è½½ä¸­...';
            document.getElementById('configYamlModal').style.display = 'block';
            
            const apiUrl = `/api/${cluster}/${namespace}/configs/${configType}/${name}/yaml`;
            
            fetch(apiUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('è·å–YAMLå¤±è´¥');
                    }
                    return response.text();
                })
                .then(yamlContent => {
                    // æ˜¾ç¤ºYAMLå†…å®¹
                    document.getElementById('configYamlContent').textContent = yamlContent;
                })
                .catch(error => {
                    console.error('è·å–YAMLå¤±è´¥:', error);
                    document.getElementById('configYamlContent').textContent = `è·å–YAMLå¤±è´¥: ${error.message}`;
                });
        }
        
        // å…³é—­é…ç½®èµ„æºYAMLæ¨¡æ€æ¡†
        function closeConfigYamlModal() {
            document.getElementById('configYamlModal').style.display = 'none';
        }
        
        // å­˜å‚¨ç®¡ç†å†…å®¹åŠ è½½
        function loadStorageContent() {
            document.getElementById('storageContent').style.display = 'block';
            // åŠ è½½é›†ç¾¤åˆ—è¡¨
            loadClustersForLoad('storageCluster');
        }
        
        // åŠ è½½å­˜å‚¨ç®¡ç†çš„å‘½åç©ºé—´
        function loadStorageNamespaces() {
            const clusterSelect = document.getElementById('storageCluster');
            const namespaceSelect = document.getElementById('storageNamespace');
            const cluster = clusterSelect.value;
            
            // æ¸…ç©ºå‘½åç©ºé—´é€‰æ‹©
            namespaceSelect.innerHTML = '<option value="">è¯·é€‰æ‹©å‘½åç©ºé—´</option>';
            
            // æ¸…ç©ºå­˜å‚¨åˆ—è¡¨
            const storageTable = document.getElementById('storageTable').getElementsByTagName('tbody')[0];
            storageTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #999;">è¯·é€‰æ‹©å‘½åç©ºé—´</td></tr>';
            
            if (!cluster) {
                return;
            }
            
            fetch(`/api/${cluster}/namespaces`)
                .then(response => response.json())
                .then(data => {
                    if (Array.isArray(data)) {
                        data.forEach(ns => {
                            const option = document.createElement('option');
                            option.value = ns.name;
                            option.textContent = ns.name;
                            namespaceSelect.appendChild(option);
                        });
                    }
                })
                .catch(error => {
                    console.error('è·å–å‘½åç©ºé—´åˆ—è¡¨å¤±è´¥:', error);
                    namespaceSelect.innerHTML = '<option value="">è·å–å‘½åç©ºé—´å¤±è´¥</option>';
                });
        }
        
        // åŠ è½½å­˜å‚¨èµ„æºåˆ—è¡¨
        function loadStorageList() {
            const cluster = document.getElementById('storageCluster').value;
            const namespace = document.getElementById('storageNamespace').value;
            const storageType = document.getElementById('storageTypeFilter').value;
            const storageTable = document.getElementById('storageTable').getElementsByTagName('tbody')[0];
            
            if (!cluster || !namespace) {
                storageTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #999;">è¯·é€‰æ‹©é›†ç¾¤å’Œå‘½åç©ºé—´</td></tr>';
                return;
            }
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            storageTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #999;">åŠ è½½ä¸­...</td></tr>';
            
            // æ„å»ºAPI URL
            let apiUrl = `/api/${cluster}/${namespace}/storage`;
            if (storageType) {
                apiUrl += `?type=${storageType}`;
            }
            
            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    if (Array.isArray(data)) {
                        renderStorage(data);
                    } else if (data.success === false) {
                        storageTable.innerHTML = `<tr><td colspan="7" style="text-align: center; color: #dc2626;">${data.message}</td></tr>`;
                    }
                })
                .catch(error => {
                    console.error('åŠ è½½å­˜å‚¨èµ„æºåˆ—è¡¨å¤±è´¥:', error);
                    storageTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #dc2626;">åŠ è½½å­˜å‚¨èµ„æºå¤±è´¥</td></tr>';
                });
        }
        
        // æ¸²æŸ“å­˜å‚¨èµ„æºåˆ—è¡¨
        function renderStorage(storage) {
            const storageTable = document.getElementById('storageTable').getElementsByTagName('tbody')[0];
            const cluster = document.getElementById('storageCluster').value;
            const namespace = document.getElementById('storageNamespace').value;
            
            if (storage.length === 0) {
                storageTable.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #999;">è¯¥å‘½åç©ºé—´ä¸‹æ²¡æœ‰å­˜å‚¨èµ„æº</td></tr>';
                return;
            }
            
            let rows = '';
            storage.forEach(item => {
                // æ ¼å¼åŒ–åˆ›å»ºæ—¶é—´
                const creationTime = new Date(item.creation_time).toLocaleString('zh-CN');
                
                rows += `
                    <tr>
                        <td>${item.name}</td>
                        <td>${item.type}</td>
                        <td>${item.namespace}</td>
                        <td>${item.capacity}</td>
                        <td>${item.status}</td>
                        <td>${creationTime}</td>
                        <td>
                            <button class="btn-secondary" onclick="viewStorageYaml('${cluster}', '${namespace}', '${item.name}', '${item.type}')">æŸ¥çœ‹YAML</button>
                        </td>
                    </tr>
                `;
            });
            
            storageTable.innerHTML = rows;
        }
        
        // æŸ¥çœ‹å­˜å‚¨èµ„æºçš„YAML
        function viewStorageYaml(cluster, namespace, name, storageType) {
            // æ˜¾ç¤ºæ¨¡æ€æ¡†
            document.getElementById('storageYamlTitle').textContent = `${storageType} ${name} YAMLé…ç½®`;
            document.getElementById('storageYamlContent').textContent = 'åŠ è½½ä¸­...';
            document.getElementById('storageYamlModal').style.display = 'block';
            
            const apiUrl = `/api/${cluster}/${namespace}/storage/${storageType}/${name}/yaml`;
            
            fetch(apiUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('è·å–YAMLå¤±è´¥');
                    }
                    return response.text();
                })
                .then(yamlContent => {
                    // æ˜¾ç¤ºYAMLå†…å®¹
                    document.getElementById('storageYamlContent').textContent = yamlContent;
                })
                .catch(error => {
                    console.error('è·å–YAMLå¤±è´¥:', error);
                    document.getElementById('storageYamlContent').textContent = `è·å–YAMLå¤±è´¥: ${error.message}`;
                });
        }
        
        // å…³é—­å­˜å‚¨èµ„æºYAMLæ¨¡æ€æ¡†
        function closeStorageYamlModal() {
            document.getElementById('storageYamlModal').style.display = 'none';
        }
        
        // åŠ è½½é›†ç¾¤åˆ—è¡¨ï¼ˆç”¨äºä¸åŒæ¨¡å—ï¼‰
        function loadClustersForLoad(selectId) {
            fetch('/api/clusters')
                .then(response => response.json())
                .then(data => {
                    const clusterSelect = document.getElementById(selectId);
                    clusterSelect.innerHTML = '<option value="">è¯·é€‰æ‹©é›†ç¾¤</option>';
                    data.forEach(cluster => {
                        const option = document.createElement('option');
                        option.value = cluster.name;
                        option.textContent = cluster.display_name || cluster.name;
                        clusterSelect.appendChild(option);
                    });
                })
                .catch(error => {
                    showMessage('åŠ è½½é›†ç¾¤å¤±è´¥: ' + error.message, 'error');
                });
        }
        
        // æ˜¾ç¤ºæ—¥å¿—åˆ—è¡¨
        function displayLogs(logs) {
            const logsTable = document.getElementById('logsTable').getElementsByTagName('tbody')[0];
            
            if (Array.isArray(logs) && logs.length > 0) {
                // æŒ‰æ—¶é—´å€’åºæ’åº
                logs.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
                
                let rows = '';
                logs.forEach(log => {
                    rows += `
                        <tr>
                            <td>${formatTimestamp(log.timestamp)}</td>
                            <td>${log.username}</td>
                            <td>${formatAction(log.action)}</td>
                            <td>${log.resource || '-'}</td>
                            <td>${log.details || '-'}</td>
                        </tr>
                    `;
                });
                logsTable.innerHTML = rows;
            } else {
                logsTable.innerHTML = '<tr><td colspan="5" style="text-align: center; color: #999;">æ²¡æœ‰æ—¥å¿—è®°å½•</td></tr>';
            }
        }
        
        // æ ¼å¼åŒ–æ—¶é—´æˆ³
        function formatTimestamp(timestamp) {
            const date = new Date(timestamp);
            return date.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
        }
        
        // æ ¼å¼åŒ–æ“ä½œç±»å‹
        function formatAction(action) {
            const actionMap = {
                'login_success': 'ç™»å½•æˆåŠŸ',
                'login_failed': 'ç™»å½•å¤±è´¥',
                'logout': 'ç™»å‡º',
                'remove_load': 'è¸¢å‡ºè´Ÿè½½',
                'restore_traffic': 'æ¢å¤æµé‡',
                'add_user': 'æ·»åŠ ç”¨æˆ·',
                'update_user': 'æ›´æ–°ç”¨æˆ·',
                'delete_user': 'åˆ é™¤ç”¨æˆ·',
                'add_cluster': 'æ·»åŠ é›†ç¾¤',
                'update_cluster': 'æ›´æ–°é›†ç¾¤',
                'delete_cluster': 'åˆ é™¤é›†ç¾¤'
            };
            return actionMap[action] || action;
        }
        
        // æ˜¾ç¤ºæ—¥å¿—æ¶ˆæ¯
        function showLogMessage(text, type) {
            const messageDiv = document.getElementById('logMessage');
            messageDiv.innerHTML = `<div class="message ${type}">${text}</div>`;
            setTimeout(() => {
                messageDiv.innerHTML = '';
            }, 3000);
        }
        
        // åº”ç”¨æ—¶é—´èŒƒå›´
        function applyTimeRange() {
            const timeRange = document.getElementById('logTimeRange').value;
            const now = new Date();
            let startDate = '';
            let endDate = '';
            
            // æ ¹æ®é€‰æ‹©çš„æ—¶é—´èŒƒå›´è®¡ç®—å¼€å§‹æ—¶é—´
            switch (timeRange) {
                case '5m':
                    startDate = new Date(now.getTime() - 5 * 60 * 1000);
                    break;
                case '1h':
                    startDate = new Date(now.getTime() - 60 * 60 * 1000);
                    break;
                case '6h':
                    startDate = new Date(now.getTime() - 6 * 60 * 60 * 1000);
                    break;
                case '12h':
                    startDate = new Date(now.getTime() - 12 * 60 * 60 * 1000);
                    break;
                case '24h':
                    startDate = new Date(now.getTime() - 24 * 60 * 60 * 1000);
                    break;
                case '3d':
                    startDate = new Date(now.getTime() - 3 * 24 * 60 * 60 * 1000);
                    break;
                case '7d':
                    startDate = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                    break;
                case '30d':
                    startDate = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);
                    break;
                default:
                    // è‡ªå®šä¹‰æ—¶é—´ï¼Œä¸åšå¤„ç†
                    return;
            }
            
            endDate = now;
            
            // è½¬æ¢ä¸ºdatetime-localæ ¼å¼ (YYYY-MM-DDTHH:MM)
            const formatDate = (date) => {
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                const hours = String(date.getHours()).padStart(2, '0');
                const minutes = String(date.getMinutes()).padStart(2, '0');
                return `${year}-${month}-${day}T${hours}:${minutes}`;
            };
            
            // è®¾ç½®è¾“å…¥æ¡†çš„å€¼
            document.getElementById('logStartDate').value = formatDate(startDate);
            document.getElementById('logEndDate').value = formatDate(endDate);
            
            // è§¦å‘æ—¥å¿—åŠ è½½
            loadLogs();
        }
        
        // å¤„ç†æ—¥å¿—æœç´¢
        function handleLogSearch() {
            const searchTerm = document.getElementById('logSearch').value.toLowerCase();
            const startDate = document.getElementById('logStartDate').value;
            const endDate = document.getElementById('logEndDate').value;
            
            let filteredLogs = logsData;
            
            // æŒ‰ç”¨æˆ·åè¿‡æ»¤
            if (searchTerm) {
                filteredLogs = filteredLogs.filter(log => 
                    log.username.toLowerCase().includes(searchTerm)
                );
            }
            
            // æŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤
            if (startDate) {
                const start = new Date(startDate).getTime();
                filteredLogs = filteredLogs.filter(log => 
                    new Date(log.timestamp).getTime() >= start
                );
            }
            
            if (endDate) {
                const end = new Date(endDate).getTime();
                filteredLogs = filteredLogs.filter(log => 
                    new Date(log.timestamp).getTime() <= end
                );
            }
            
            displayLogs(filteredLogs);
        }
        
        // è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
        let currentUserInfo = null;

        function getCurrentUser() {
            fetch('/api/current-user')
                .then(response => response.json())
                .then(data => {
                    currentUserInfo = data;
                    // æ›´æ–°æ˜¾ç¤ºçš„ç”¨æˆ·å
                    document.getElementById('currentUsername').textContent = data.username;
                })
                .catch(error => {
                    console.error('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', error);
                });
        }
        
        // ç™»å‡ºåŠŸèƒ½
        document.getElementById('logoutBtn').addEventListener('click', function() {
            if (confirm('ç¡®å®šè¦ç™»å‡ºå—ï¼Ÿ')) {
                fetch('/api/logout', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        window.location.href = '/login';
                    } else {
                        alert('ç™»å‡ºå¤±è´¥: ' + data.message);
                    }
                })
                .catch(error => {
                    alert('ç™»å‡ºå¤±è´¥: ' + error.message);
                });
            }
        });
        
        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­æ¨¡æ€æ¡†
        window.onclick = function(event) {
            const userModal = document.getElementById('userModal');
            if (event.target == userModal) {
                closeUserModal();
            }
        };
        
        // æ ·å¼è¡¥å……
        const style = document.createElement('style');
        style.textContent = `
            /* æ¨¡æ€æ¡†æ ·å¼ */
            .modal {
                display: none;
                position: fixed;
                z-index: 1000;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                overflow: auto;
                background-color: rgba(0, 0, 0, 0.4);
            }
            
            .modal-content {
                background-color: white;
                margin: 15% auto;
                padding: 20px;
                border: 1px solid #888;
                width: 80%;
                max-width: 600px;
                border-radius: 8px;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            }
            
            .close {
                color: #aaa;
                float: right;
                font-size: 28px;
                font-weight: bold;
                cursor: pointer;
            }
            
            .close:hover,
            .close:focus {
                color: black;
                text-decoration: none;
                cursor: pointer;
            }
            
            /* è¡¨å•æ ·å¼ */
            .form-group {
                margin-bottom: 20px;
            }
            
            .form-group label {
                display: block;
                margin-bottom: 8px;
                font-weight: 600;
                color: #2d3748;
            }
            
            .form-group input,
            .form-group textarea {
                width: 100%;
                padding: 12px 16px;
                border: 2px solid #e2e8f0;
                border-radius: 8px;
                font-size: 1rem;
                transition: all 0.3s ease;
            }
            
            .form-group input:focus,
            .form-group textarea:focus {
                outline: none;
                border-color: #667eea;
                box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            }
            
            .form-group textarea {
                height: 150px;
                resize: vertical;
            }
            
            /* æƒé™è®¾ç½®æ ·å¼ */
            .permissions-section {
                margin-top: 16px;
                margin-bottom: 24px;
            }
            
            .permissions-title {
                font-size: 16px;
                font-weight: 600;
                margin-bottom: 16px;
                color: #2d3748;
            }
            
            .permissions-grid {
                display: flex;
                flex-direction: column;
                gap: 12px;
            }
            
            .permission-item {
                display: flex;
                align-items: center;
                gap: 12px;
                padding: 16px;
                background-color: #f8fafc;
                border: 2px solid #e2e8f0;
                border-radius: 10px;
                transition: all 0.3s ease;
            }
            
            .permission-item:hover {
                background-color: #ffffff;
                border-color: #cbd5e1;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            }
            
            .permission-item input[type="checkbox"] {
                width: 20px;
                height: 20px;
                accent-color: #667eea;
                cursor: pointer;
                flex-shrink: 0;
            }
            
            .permission-item label {
                flex: 1;
                font-size: 14px;
                font-weight: 500;
                color: #4a5568;
                cursor: pointer;
                margin: 0;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>